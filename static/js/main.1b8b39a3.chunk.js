(this["webpackJsonptodo-rekrutacja"]=this["webpackJsonptodo-rekrutacja"]||[]).push([[0],{13:function(e,t,a){e.exports={dashboard:"Dashboard_dashboard__1l120",main:"Dashboard_main__3SXLX",header:"Dashboard_header__2n_LS",containerNewTodo:"Dashboard_containerNewTodo__yC2o2",btn:"Dashboard_btn__1mwS5",label:"Dashboard_label__1NCam",labelSelect:"Dashboard_labelSelect__2W2OF",field:"Dashboard_field__3O5NP",select:"Dashboard_select__2bT_A"}},199:function(e,t,a){},200:function(e,t,a){"use strict";a.r(t);var n=a(0),s=a.n(n),c=a(30),i=a.n(c),o=a(2),r=a(203),l=a(24),d=a(5),j=a(7),u=a(46),b=a.n(u),h=a(19),m=a(1),O=function(e){var t=Object.assign({},e),a=Object(h.c)(t),s=Object(o.a)(a,2),c=s[0],i=s[1],r=i.touched&&i.error?i.error:"",l=Object(n.useState)(!1),d=Object(o.a)(l,2),u=d[0],O=d[1];return Object(m.jsxs)("label",{onFocus:function(){return O(!u)},onBlur:function(){return O(!u)},className:b.a.label,children:[Object(m.jsx)("input",Object(j.a)(Object(j.a)(Object(j.a)({},t),c),{},{className:b.a.field})),Object(m.jsx)("p",{className:b.a.error,children:r})]})},_=a(84),p=a.n(_),f=function(e){var t=e.text;return Object(m.jsx)("button",{type:"submit",className:p.a.btn,children:t})},x=a(9),N=a.n(x),g=a(33),v=a.n(g),w=function(e){var t=e.openCreateList,a=Object(r.a)(),n=Object(o.a)(a,3)[2];return Object(m.jsxs)("header",{style:t?{filter:"blur(5px)"}:{},className:v.a.header,children:[Object(m.jsx)("div",{children:Object(m.jsx)("h2",{className:v.a.name,children:"ToDo-List"})}),Object(m.jsx)("div",{children:Object(m.jsx)("button",{onClick:function(){n("user")},className:v.a.button,children:Object(m.jsx)("i",{className:"fas fa-sign-out-alt ".concat(v.a.icon)})})})]})},k=function(){var e=Object(r.a)(),t=Object(o.a)(e,2)[1],a=Object(n.useState)(""),s=Object(o.a)(a,2),c=s[0],i=s[1],j=Object(d.g)();return Object(m.jsxs)(m.Fragment,{children:[Object(m.jsx)(w,{}),Object(m.jsxs)("div",{className:N.a.container,children:[Object(m.jsx)(h.b,{initialValues:{identifier:"",password:""},onSubmit:function(e){return function(e){fetch("".concat("https://recruitment.ultimate.systems","/auth/local"),{method:"POST",mode:"cors",headers:{"Content-Type":"application/json"},body:JSON.stringify(e)}).then((function(e){return e.json()})).then((function(e){console.log(e),400===e.statusCode&&i(e.message[0].messages[0].message),e.jwt&&(t("user",e,{path:"/"}),j.push("/dashboard"))}))}(e)},children:Object(m.jsxs)(h.a,{className:N.a.form,children:[Object(m.jsx)("h3",{className:N.a.formText,children:"Login"}),Object(m.jsx)(O,{name:"identifier",type:"text",id:"identifier",placeholder:"Email or Username"},"identifier-field"),Object(m.jsx)(O,{name:"password",type:"password",id:"password",placeholder:"Password"},"password-field"),Object(m.jsx)("p",{className:N.a.error,children:c}),Object(m.jsx)(f,{text:"Login"})]})}),Object(m.jsxs)("div",{className:N.a.action,children:[Object(m.jsx)("span",{className:N.a.text,children:"or"}),Object(m.jsx)(l.b,{className:N.a.link,to:"/registration",children:"create an account"})]})]})]})},L=a(22),y=L.a({username:L.c().min(1,"Must be at least 2 characters long").defined("Field is required"),email:L.c().email("Email is invalid").defined("Email is required"),password:L.c().min(8,"Password to short! Must be at least 8 characters long").defined("Field is required"),repeatPassword:L.c().oneOf([L.b("password"),null],"Passwords do not match").defined("Field is required")}),C=function(){var e=Object(n.useState)({type:"",message:""}),t=Object(o.a)(e,2),a=t[0],s=t[1];console.log("https://recruitment.ultimate.systems");var c=Object(d.g)();return Object(m.jsxs)(m.Fragment,{children:[Object(m.jsx)(w,{}),Object(m.jsxs)("div",{className:N.a.container,children:[Object(m.jsx)(l.b,{to:"/",children:Object(m.jsx)("i",{className:"fas fa-long-arrow-alt-left fa-3x ".concat(N.a.icon)})}),Object(m.jsx)(h.b,{initialValues:{username:"",email:"",password:"",repeatPassword:""},validationSchema:y,onSubmit:function(e){return function(e){var t={username:e.username,email:e.email,password:e.password};fetch("".concat("https://recruitment.ultimate.systems","/auth/local/register"),{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(t)}).then((function(e){return e.json()})).then((function(e){400===e.statusCode&&s({type:"invalid",message:e.message[0].messages[0].message}),e.jwt&&(s({type:"valid",message:"Your account has been created"}),setTimeout((function(){c.push("/")}),1500))}))}(e)},children:Object(m.jsxs)(h.a,{className:N.a.form,children:[Object(m.jsx)("h3",{className:N.a.formText,children:"Create an new account"}),Object(m.jsx)(O,{name:"username",type:"text",id:"username",placeholder:"Username"},"username-field"),Object(m.jsx)(O,{name:"email",type:"email",id:"email",placeholder:"Email"},"email-field"),Object(m.jsx)(O,{name:"password",type:"password",id:"password",placeholder:"Password"},"password-field"),Object(m.jsx)(O,{name:"repeatPassword",type:"password",id:"repeat-password",placeholder:"Repeat password"},"repeat-password-field"),Object(m.jsx)(f,{text:"Create"}),Object(m.jsx)("p",{className:"invalid"===a.type?"".concat(N.a.error):"".concat(N.a.success),children:a.message})]})})]})]})},S=a(202),D=a(204),T=Object(D.a)({initialState:{data:{id:null,isNew:!0}},actions:{getId:function(e,t){return function(a){a.getState;(0,a.setState)({data:{id:e,isNew:t}})}}}}),A=Object(S.a)(T),E=a(13),q=a.n(E),F=a(8),B=a(3),P=a.n(B),I=function(e){var t=e.name,a=e.isDone,n=e.id,s=e.list,c=e.setList,i=s.task;return Object(m.jsxs)("div",{className:"".concat(P.a.content," ").concat(P.a.todo),children:[Object(m.jsx)("button",{onClick:function(){!function(){var e=i.find((function(e){return e.id===n}));e.isDone=!e.isDone,c(Object(j.a)(Object(j.a)({},s),{},{task:Object(F.a)(i)}))}()},className:"".concat(P.a.square," ").concat(a?P.a.completed:null),children:a&&Object(m.jsx)("i",{className:"fas fa-check"})}),Object(m.jsx)("p",{className:P.a.task,children:t})]})},z=function(e){var t=e.setOpenCreateList,a=e.refreshLists,s=A(),c=Object(o.a)(s,1)[0],i=Object(n.useState)({name:"",task:[]}),l=Object(o.a)(i,2),d=l[0],u=l[1],b=c.data,h=Object(n.useState)(""),O=Object(o.a)(h,2),_=O[0],p=O[1],f=Object(n.useState)({name:"",isDone:!1}),x=Object(o.a)(f,2),N=x[0],g=x[1],v=Object(r.a)(),w=Object(o.a)(v,1)[0].user;return Object(n.useEffect)((function(){null!==c.data.id&&fetch("".concat("https://recruitment.ultimate.systems","/to-do-lists/").concat(b.id),{method:"GET",headers:{"Content-Type":"application/json",Authorization:"Bearer ".concat(w.jwt)}}).then((function(e){return e.json()})).then((function(e){return u({name:e.name,task:e.task})}))}),[]),console.log(d.task),Object(m.jsxs)("div",{className:P.a.create,children:[Object(m.jsxs)("div",{children:[Object(m.jsx)("label",{className:P.a.label,children:Object(m.jsx)("input",{onChange:function(e){return u(Object(j.a)(Object(j.a)({},d),{},{name:e.target.value}))},placeholder:"List name",className:P.a.field,type:"text",value:d.name})}),Object(m.jsx)("div",{className:P.a.containerTodos,children:d.task.map((function(e,t){var a=e.name,n=e.isDone,s=e.id;return Object(m.jsx)(I,{list:d,setList:u,name:a,isDone:n,id:s},t)}))}),Object(m.jsx)("div",{className:P.a.containerAddInput,children:Object(m.jsxs)("label",{children:[Object(m.jsxs)("div",{className:P.a.content,children:[Object(m.jsx)("button",{onClick:function(){return g(Object(j.a)(Object(j.a)({},N),{},{isDone:!N.isDone}))},className:"".concat(P.a.square," ").concat(N.isDone?P.a.completed:null),children:N.isDone&&Object(m.jsx)("i",{className:"fas fa-check"})}),Object(m.jsx)("input",{placeholder:"Task name",className:P.a.fieldAddTask,type:"text",value:N.name,onChange:function(e){return g(Object(j.a)(Object(j.a)({},N),{},{name:e.target.value}))}})]}),Object(m.jsxs)("div",{className:P.a.containerButtons,children:[Object(m.jsx)("button",{onClick:function(){return g({name:"",isDone:!1})},className:"".concat(P.a.btn," ").concat(P.a.cancel),children:"Cancel"}),Object(m.jsx)("button",{onClick:function(){N.name.length>0&&(u(Object(j.a)(Object(j.a)({},d),{},{task:[].concat(Object(F.a)(d.task),[N])})),g({name:"",isDone:!1}))},className:"".concat(P.a.btn," ").concat(P.a.add),children:"Add"}),Object(m.jsx)("p",{className:P.a.message,children:_})]})]})})]}),Object(m.jsxs)("div",{className:P.a.action,children:[Object(m.jsx)("button",{className:"".concat(P.a.btn," ").concat(P.a.delete),onClick:function(){fetch("".concat("https://recruitment.ultimate.systems","/to-do-lists/").concat(c.data.id),{method:"DELETE",headers:{"Content-Type":"application/json",Authorization:"Bearer ".concat(w.jwt)}}).then((function(e){return e.json()})).then((function(){a(),t(!1)}))},children:"Delete"}),Object(m.jsx)("button",{onClick:function(){t(!1)},className:"".concat(P.a.btn," ").concat(P.a.close),children:"Cancel"}),Object(m.jsx)("button",{onClick:function(){b.isNew?d.name.length>0?fetch("".concat("https://recruitment.ultimate.systems","/to-do-lists"),{method:"POST",headers:{"Content-Type":"application/json",Authorization:"Bearer ".concat(w.jwt)},body:JSON.stringify(d)}).then((function(e){return e.json()})).then((function(){a()})):p("Name of list cannot be empty"):fetch("".concat("https://recruitment.ultimate.systems","/to-do-lists/").concat(c.data.id),{method:"PUT",headers:{"Content-Type":"application/json",Authorization:"Bearer ".concat(w.jwt)},body:JSON.stringify(d)}).then((function(e){return e.json()})).then((function(e){return u({name:e.name,task:e.task})})),t(!1)},className:"".concat(P.a.btn," ").concat(P.a.add),children:"Save"})]})]})},H=a(34),J=a.n(H),M=function(e){var t=e.name,a=e.published_at,n=e.id,s=e.task,c=e.setOpenCreateList,i=A(),r=Object(o.a)(i,2)[1];return Object(m.jsxs)("div",{onClick:function(){r.getId(n,!1),c(!0)},className:J.a.list,children:[Object(m.jsx)("h5",{className:J.a.name,children:t}),Object(m.jsxs)("p",{className:J.a.listDate,children:["Created at: ",function(){var e=new Date(a),t=e.getFullYear(),n=e.getMonth()+1,s=e.getDate();return n<10&&(n="0".concat(n)),s<10&&(s="0".concat(s)),"".concat(s,"-").concat(n,"-").concat(t)}()]}),Object(m.jsx)("p",{className:J.a.count,children:function(){var e=s.filter((function(e){return!0===e.isDone})),t=s.filter((function(e){return!1===e.isDone}));return"Completed: ".concat(e.length," Uncompleted: ").concat(t.length," All: ").concat(s.length)}()})]})},U=function(){var e=Object(r.a)(),t=Object(o.a)(e,1)[0].user,a=A(),s=Object(o.a)(a,2)[1],c=Object(n.useState)(!1),i=Object(o.a)(c,2),l=i[0],d=i[1],j=Object(n.useState)(""),u=Object(o.a)(j,2),b=u[0],h=u[1],O=Object(n.useState)("Sort by"),_=Object(o.a)(O,2),p=_[0],f=_[1],x=Object(n.useState)([]),N=Object(o.a)(x,2),g=N[0],v=N[1],k=function(){fetch("".concat("https://recruitment.ultimate.systems","/to-do-lists"),{method:"GET",headers:{"Content-Type":"application/json",Authorization:"Bearer ".concat(t.jwt)}}).then((function(e){return e.json()})).then((function(e){return v(e)}))};return Object(n.useEffect)((function(){k()}),[]),Object(m.jsxs)(m.Fragment,{children:[Object(m.jsx)(w,{openCreateList:l}),l&&Object(m.jsx)(z,{refreshLists:k,setOpenCreateList:d}),Object(m.jsx)("section",{onClick:function(){l&&d(!1)},style:l?{filter:"blur(3px)"}:{},className:q.a.dashboard,children:Object(m.jsxs)("div",{className:q.a.main,children:[Object(m.jsxs)("div",{className:q.a.header,children:[Object(m.jsx)("label",{className:q.a.label,children:Object(m.jsx)("input",{className:q.a.field,placeholder:"Search",type:"text",value:b,onChange:function(e){return h(e.target.value)}})}),Object(m.jsx)("label",{className:q.a.labelSelect,children:Object(m.jsxs)("select",{onChange:function(e){return f(e.target.value)},className:"".concat(q.a.field," ").concat(q.a.select),value:p,children:[Object(m.jsx)("option",{value:"Sort by",disabled:!0,children:"Sort by"}),Object(m.jsx)("option",{value:"completed",children:"Most completed tasks"}),Object(m.jsx)("option",{value:"uncompleted",children:"Least completed tasks"}),Object(m.jsx)("option",{value:"latest",children:"Latest"}),Object(m.jsx)("option",{value:"amount",children:"Most tasks"})]})})]}),Object(m.jsx)("div",{className:q.a.todos,children:g.filter((function(e){return e.name.toLowerCase().includes(b.toLowerCase())})).sort((function(e,t){switch(p){case"completed":case"uncompleted":return;case"latest":return new Date(e.published_at)>new Date(t.published_at)?-1:1;case"amount":return t.task.length-e.task.length}})).map((function(e){var t=e.id,a=e.name,n=e.published_at,s=e.task;return Object(m.jsx)(M,{id:t,name:a,published_at:n,task:s,setOpenCreateList:d,openCreateList:l},t)}))}),Object(m.jsx)("div",{className:q.a.containerNewTodo,children:Object(m.jsx)("button",{onClick:function(){s.getId(null,!0),l||d(!0)},className:q.a.btn})})]})})]})},R=function(){var e=Object(r.a)(),t=Object(o.a)(e,1)[0].user;return Object(m.jsx)(m.Fragment,{children:Object(m.jsx)(l.a,{children:Object(m.jsxs)(d.d,{children:[Object(m.jsx)(d.b,{exact:!0,path:"/dashboard",children:t?Object(m.jsx)(U,{}):Object(m.jsx)(d.a,{to:"/"})}),Object(m.jsx)(d.b,{exact:!0,path:"/registration",children:t?Object(m.jsx)(d.a,{to:"/dashboard"}):Object(m.jsx)(C,{})}),Object(m.jsx)(d.b,{exact:!0,path:"/",children:t?Object(m.jsx)(d.a,{to:"/dashboard"}):Object(m.jsx)(k,{})})]})})})};a(199);i.a.render(Object(m.jsx)(s.a.StrictMode,{children:Object(m.jsx)(R,{})}),document.getElementById("root"))},3:function(e,t,a){e.exports={create:"List_create__2-pVh",containerAddInput:"List_containerAddInput__1Y6VN",containerTodos:"List_containerTodos__IzZwJ",label:"List_label__RTqw5",field:"List_field__2v575",fieldAddTask:"List_fieldAddTask__20wqd",content:"List_content__21NjZ",square:"List_square__2CnO7",containerButtons:"List_containerButtons__2nWtq",btn:"List_btn__2H9SS",cancel:"List_cancel__1FGW-",add:"List_add__1BhEi",action:"List_action__10mlQ",close:"List_close__vmuVI",delete:"List_delete__3xIQA",task:"List_task__1JwwN",todo:"List_todo__b0dEm",completed:"List_completed__7t-48","fa-check":"List_fa-check__1xGqX",message:"List_message__3ilOH"}},33:function(e,t,a){e.exports={header:"Header_header__lKNbk",name:"Header_name__2LKKb",icon:"Header_icon__38Vt7",button:"Header_button__1Mz9f"}},34:function(e,t,a){e.exports={list:"SingleList_list__2NsRq",listDate:"SingleList_listDate__2EhzS",name:"SingleList_name__3RhUu",count:"SingleList_count__1ENwS"}},46:function(e,t,a){e.exports={label:"Field_label__25TRj",field:"Field_field__gEjah",error:"Field_error__1Gnx0"}},84:function(e,t,a){e.exports={btn:"FormButton_btn__3wAi0"}},9:function(e,t,a){e.exports={container:"Auth_container__DLp8M",formText:"Auth_formText__IrzHq",form:"Auth_form__1U8iO",icon:"Auth_icon__U5zUR",action:"Auth_action__r8qKH",link:"Auth_link__2vbjZ",text:"Auth_text__2mK62",error:"Auth_error__Rd2bV",success:"Auth_success__3ErGC"}}},[[200,1,2]]]);
//# sourceMappingURL=main.1b8b39a3.chunk.js.map