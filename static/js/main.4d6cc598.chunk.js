(this["webpackJsonptodo-rekrutacja"]=this["webpackJsonptodo-rekrutacja"]||[]).push([[0],{10:function(e,t,a){e.exports={container:"Auth_container__3sNPm",formText:"Auth_formText__1g8l8",upper:"Auth_upper__2eOfG",form:"Auth_form__15skY",icon:"Auth_icon__2uB7E",action:"Auth_action__1IGJK",link:"Auth_link__3CDoQ",text:"Auth_text__1N5zJ",error:"Auth_error__3GZiJ",success:"Auth_success__3VbrN"}},14:function(e,t,a){e.exports={dashboard:"Dashboard_dashboard__1TtZL",main:"Dashboard_main__2sLdU",header:"Dashboard_header__Z_7Zm",containerNewTodo:"Dashboard_containerNewTodo__25Qqp",btn:"Dashboard_btn__1cr7v",label:"Dashboard_label__2ZL0Z",labelSelect:"Dashboard_labelSelect__3DKvi",field:"Dashboard_field__3AVyE",select:"Dashboard_select__1qO34",blur:"Dashboard_blur__2nqZk"}},201:function(e,t,a){},202:function(e,t,a){"use strict";a.r(t);var n=a(0),s=a.n(n),c=a(82),r=a.n(c),o=a(3),i=a(203),l=a(16),u=a(5),d=a(2),b=a.n(d),j=a(7),p=a(8),h=a(46),m=a.n(h),f=a(21),_=a(1),O=function(e){var t=Object.assign({},e),a=Object(f.c)(t),n=Object(o.a)(a,2),s=n[0],c=n[1],r=c.touched&&c.error?c.error:"";return Object(_.jsxs)("div",{className:m.a.container,children:[Object(_.jsx)("input",Object(p.a)(Object(p.a)(Object(p.a)({},t),s),{},{className:m.a.field,"data-testid":t["data-testid"]||"input"})),Object(_.jsx)("p",{"data-testid":"message-validation",className:m.a.error,children:r})]})},x=a(85),v=a.n(x),k=function(e){var t=e.text;return Object(_.jsx)("button",{"data-testid":"btn-auth",type:"submit",className:v.a.btn,children:t})},w=a(10),g=a.n(w),N=a(34),y=a.n(N),L=function(){var e=Object(i.a)(),t=Object(o.a)(e,3),a=t[0],n=t[2],s=a.user;return Object(_.jsxs)("header",{className:y.a.header,children:[Object(_.jsx)("div",{children:Object(_.jsx)("h2",{className:y.a.name,children:"ToDo-List"})}),s&&Object(_.jsx)("div",{children:Object(_.jsx)("button",{onClick:function(){n("user")},className:y.a.button,children:Object(_.jsx)("i",{className:"fas fa-sign-out-alt ".concat(y.a.icon)})})})]})},C=function(){var e=Object(j.a)(b.a.mark((function e(t){var a,n;return b.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,fetch("".concat("https://recruitment.ultimate.systems","/auth/local"),{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(t)});case 2:return a=e.sent,e.next=5,a.json();case 5:return n=e.sent,e.abrupt("return",n);case 7:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),T=function(){var e=Object(j.a)(b.a.mark((function e(t){var a,n,s;return b.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a={username:t.username,email:t.email,password:t.password},e.next=3,fetch("".concat("https://recruitment.ultimate.systems","/auth/local/register"),{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(a)});case 3:return n=e.sent,e.next=6,n.json();case 6:return s=e.sent,e.abrupt("return",s);case 8:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),D=function(){var e=Object(i.a)(),t=Object(o.a)(e,2)[1],a=Object(n.useState)(""),s=Object(o.a)(a,2),c=s[0],r=s[1],d=Object(u.g)(),p=function(){var e=Object(j.a)(b.a.mark((function e(a){var n;return b.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,C(a);case 2:if(400!==(n=e.sent).statusCode){e.next=6;break}try{r(n.message[0].messages[0].message)}catch(s){r("Error")}return e.abrupt("return");case 6:if(!n.jwt){e.next=10;break}return t("user",n.jwt),d.push("/dashboard"),e.abrupt("return");case 10:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}();return Object(_.jsxs)(_.Fragment,{children:[Object(_.jsx)(L,{}),Object(_.jsxs)("div",{className:g.a.container,children:[Object(_.jsx)(f.b,{initialValues:{identifier:"",password:""},onSubmit:function(e){return p(e)},children:Object(_.jsxs)(f.a,{className:g.a.form,children:[Object(_.jsx)("h3",{className:g.a.formText,"data-testid":"headline",children:"Login"}),Object(_.jsx)(O,{name:"identifier",type:"text",id:"identifier",placeholder:"Email or Username","data-testid":"login-field"},"identifier-field"),Object(_.jsx)(O,{name:"password",type:"password",id:"password",placeholder:"Password"},"password-field"),Object(_.jsx)("p",{className:g.a.error,children:c}),Object(_.jsx)(k,{text:"Login"})]})}),Object(_.jsxs)("div",{className:g.a.action,children:[Object(_.jsx)("span",{className:g.a.text,children:"or"}),Object(_.jsx)(l.b,{className:g.a.link,to:"/registration",children:"create an account"})]})]})]})},S=a(25),A=S.a({username:S.c().min(1,"Must be at least 2 characters long").defined("Field is required"),email:S.c().email("Email is invalid").defined("Email is required"),password:S.c().min(8,"Password to short! Must be at least 8 characters long").defined("Field is required"),repeatPassword:S.c().oneOf([S.b("password"),null],"Passwords do not match").defined("Field is required")}),E=function(){var e=Object(n.useState)({type:"",message:""}),t=Object(o.a)(e,2),a=t[0],s=t[1],c=Object(u.g)(),r=function(){var e=Object(j.a)(b.a.mark((function e(t){var a;return b.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,T(t);case 2:if(400===(a=e.sent).statusCode)try{s({type:"invalid",message:a.message[0].messages[0].message})}catch(n){s({type:"invalid",message:"Error"})}a.jwt&&(s({type:"valid",message:"Your account has been created"}),setTimeout((function(){c.push("/")}),1500));case 5:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}();return Object(_.jsxs)(_.Fragment,{children:[Object(_.jsx)(L,{}),Object(_.jsxs)("div",{className:g.a.container,children:[Object(_.jsx)(l.b,{to:"/",children:Object(_.jsx)("i",{className:"fas fa-long-arrow-alt-left fa-3x ".concat(g.a.icon)})}),Object(_.jsx)(f.b,{initialValues:{username:"",email:"",password:"",repeatPassword:""},validationSchema:A,onSubmit:function(e){return r(e)},children:Object(_.jsxs)(f.a,{className:g.a.form,children:[Object(_.jsx)("h3",{className:"".concat(g.a.formText," ").concat(g.a.upper),children:"Create an new account"}),Object(_.jsx)(O,{name:"username",type:"text",id:"username",placeholder:"Username","data-testid":"username"},"username-field"),Object(_.jsx)(O,{name:"email",type:"email",id:"email",placeholder:"Email"},"email-field"),Object(_.jsx)(O,{name:"password",type:"password",id:"password",placeholder:"Password"},"password-field"),Object(_.jsx)(O,{name:"repeatPassword",type:"password",id:"repeat-password",placeholder:"Repeat password"},"repeat-password-field"),Object(_.jsx)(k,{text:"Create"}),Object(_.jsx)("p",{className:"invalid"===a.type?"".concat(g.a.error):"".concat(g.a.success),children:a.message})]})})]})]})},q=a(14),P=a.n(q),F=a(35),B=a.n(F),H=function(e){var t=e.name,a=e.published_at,n=e.id,s=e.task,c=function(e){var t=new Date(e),a=t.getFullYear(),n=t.getMonth()+1,s=t.getDate();return n<10&&(n="0".concat(n)),s<10&&(s="0".concat(s)),"".concat(s,"-").concat(n,"-").concat(a)}(a),r=function(e){var t=e.filter((function(e){return!0===e.isDone})),a=e.filter((function(e){return!1===e.isDone}));return{completed:t.length,unCompleted:a.length,all:e.length}}(s),o=r.completed,i=r.unCompleted,u=r.all;return Object(_.jsxs)(l.b,{to:"/dashboard/".concat(n),className:B.a.list,"data-testid":"list",children:[Object(_.jsx)("h5",{"data-testid":"name-of-list",className:B.a.name,children:t}),Object(_.jsxs)("p",{className:B.a.listDate,children:["Created at: ",c]}),Object(_.jsx)("p",{"data-testid":"count-list",className:B.a.count,children:"Completed: ".concat(o," Uncompleted: ").concat(i," All: ").concat(u)})]})},J=a(9),G=a(4),Z=a.n(G),M=a(24),U=a.n(M),z=function(e){var t=e.name,a=e.isDone,n=e.id,s=e.list,c=e.setList,r=s.task;return Object(_.jsxs)("div",{className:"".concat(U.a.content," ").concat(U.a.todo),children:[Object(_.jsx)("button",{onClick:function(){r[n].isDone=!r[n].isDone,c(Object(p.a)(Object(p.a)({},s),{},{task:Object(J.a)(r)}))},className:"".concat(U.a.square," ").concat(a?U.a.completed:null),children:a&&Object(_.jsx)("i",{className:"fas fa-check"})}),Object(_.jsx)("p",{"data-testid":"todo-name",className:U.a.task,children:t}),Object(_.jsx)("button",{className:U.a.delete,onClick:function(){var e=Object(J.a)(r);e.splice(n,1),c(Object(p.a)(Object(p.a)({},s),{},{task:e}))},children:Object(_.jsx)("i",{className:"fas fa-times"})})]})},K=function(){var e=Object(j.a)(b.a.mark((function e(t){var a,n;return b.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,fetch("".concat("https://recruitment.ultimate.systems","/to-do-lists"),{method:"GET",headers:{"Content-Type":"application/json",Authorization:"Bearer ".concat(t)}});case 3:return a=e.sent,e.next=6,a.json();case 6:return n=e.sent,e.abrupt("return",{json:n,correct:!0});case 10:return e.prev=10,e.t0=e.catch(0),e.abrupt("return",{correct:!1});case 13:case"end":return e.stop()}}),e,null,[[0,10]])})));return function(t){return e.apply(this,arguments)}}(),I=function(){var e=Object(j.a)(b.a.mark((function e(t,a){var n,s;return b.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,fetch("".concat("https://recruitment.ultimate.systems","/to-do-lists/").concat(a),{method:"GET",headers:{"Content-Type":"application/json",Authorization:"Bearer ".concat(t)}});case 2:return n=e.sent,e.next=5,n.json();case 5:return s=e.sent,e.abrupt("return",s);case 7:case"end":return e.stop()}}),e)})));return function(t,a){return e.apply(this,arguments)}}(),V=function(){var e=Object(j.a)(b.a.mark((function e(t,a){return b.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,fetch("".concat("https://recruitment.ultimate.systems","/to-do-lists"),{method:"POST",headers:{"Content-Type":"application/json",Authorization:"Bearer ".concat(t)},body:JSON.stringify(a)});case 2:case"end":return e.stop()}}),e)})));return function(t,a){return e.apply(this,arguments)}}(),Q=function(){var e=Object(j.a)(b.a.mark((function e(t,a,n){return b.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,fetch("".concat("https://recruitment.ultimate.systems","/to-do-lists/").concat(n),{method:"PUT",headers:{"Content-Type":"application/json",Authorization:"Bearer ".concat(t)},body:JSON.stringify(a)});case 2:case"end":return e.stop()}}),e)})));return function(t,a,n){return e.apply(this,arguments)}}(),Y=function(){var e=Object(j.a)(b.a.mark((function e(t,a){return b.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,fetch("".concat("https://recruitment.ultimate.systems","/to-do-lists/").concat(a),{method:"DELETE",headers:{"Content-Type":"application/json",Authorization:"Bearer ".concat(t)}});case 2:case"end":return e.stop()}}),e)})));return function(t,a){return e.apply(this,arguments)}}(),R=function(e){var t=e.setOpenList,a=e.refreshLists,s=e.id,c=Object(n.useState)({name:"",task:[]}),r=Object(o.a)(c,2),l=r[0],d=r[1],h=Object(u.g)(),m=Object(n.useState)(""),f=Object(o.a)(m,2),O=f[0],x=f[1],v=Object(n.useState)({name:"",isDone:!1}),k=Object(o.a)(v,2),w=k[0],g=k[1],N=Object(i.a)(),y=Object(o.a)(N,1)[0].user,L=function(){return l.name.trim().length>0||(x("Name of list cannot be empty"),!1)},C=function(){a(),t(!1),s&&h.push("/dashboard")},T=function(){var e=Object(j.a)(b.a.mark((function e(){var a;return b.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,I(y,s);case 2:if(404!==(a=e.sent).statusCode){e.next=7;break}return h.push("/dashboard"),t(!1),e.abrupt("return");case 7:d({name:a.name,task:a.task});case 8:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),D=function(){var e=Object(j.a)(b.a.mark((function e(){return b.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!L()){e.next=5;break}return e.next=4,V(y,l);case 4:C();case 5:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),S=function(){var e=Object(j.a)(b.a.mark((function e(){return b.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!L()){e.next=5;break}return e.next=4,Q(y,l,s);case 4:C();case 5:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),A=function(){var e=Object(j.a)(b.a.mark((function e(){return b.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Y(y,s);case 2:C();case 3:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();return Object(n.useEffect)((function(){s&&T()}),[s]),Object(_.jsxs)("div",{"data-testid":"list",className:Z.a.create,children:[Object(_.jsxs)("div",{children:[Object(_.jsx)("div",{className:Z.a.label,children:Object(_.jsx)("input",{onChange:function(e){return d(Object(p.a)(Object(p.a)({},l),{},{name:e.target.value}))},placeholder:"List name",className:Z.a.field,type:"text",value:l.name,"data-testid":"list-name"})}),Object(_.jsx)("div",{className:Z.a.containerTodos,children:l.task.map((function(e,t){var a=e.name,n=e.isDone;return Object(_.jsx)(z,{id:t,list:l,setList:d,name:a,isDone:n},t)}))}),Object(_.jsxs)("div",{className:Z.a.containerAddInput,children:[Object(_.jsxs)("div",{className:Z.a.content,children:[Object(_.jsx)("button",{onClick:function(){return g(Object(p.a)(Object(p.a)({},w),{},{isDone:!w.isDone}))},className:"".concat(Z.a.square," ").concat(w.isDone?Z.a.completed:null),children:w.isDone&&Object(_.jsx)("i",{className:"fas fa-check"})}),Object(_.jsx)("input",{placeholder:"Task name",className:Z.a.fieldAddTask,type:"text",value:w.name,onChange:function(e){return g(Object(p.a)(Object(p.a)({},w),{},{name:e.target.value}))},"data-testid":"todo-name"})]}),Object(_.jsxs)("div",{className:Z.a.containerButtons,children:[Object(_.jsx)("button",{onClick:function(){return g({name:"",isDone:!1})},className:"".concat(Z.a.btn," ").concat(Z.a.btnTodo," ").concat(Z.a.cancel),children:"Cancel"}),Object(_.jsx)("button",{onClick:function(){w.name.trim().length>0&&(d(Object(p.a)(Object(p.a)({},l),{},{task:[].concat(Object(J.a)(l.task),[w])})),g({name:"",isDone:!1}))},className:"".concat(Z.a.btn," ").concat(Z.a.btnTodo," ").concat(Z.a.add),children:"Add"}),Object(_.jsx)("p",{className:Z.a.message,children:O})]})]})]}),Object(_.jsxs)("div",{className:Z.a.action,children:[s&&Object(_.jsx)("button",{className:"".concat(Z.a.btn," ").concat(Z.a.btnList," ").concat(Z.a.delete),onClick:A,children:"Delete"}),Object(_.jsx)("button",{onClick:function(){t(!1),s&&h.push("/dashboard")},className:"".concat(Z.a.btn," ").concat(Z.a.btnList," ").concat(Z.a.close),children:"Cancel"}),Object(_.jsx)("button",{onClick:function(){s?S():D()},className:"".concat(Z.a.btn," ").concat(Z.a.btnList," ").concat(Z.a.add),children:"Save"})]})]})},X=function(e,t){return{firstCompleted:e.task.filter((function(e){return!0===e.isDone})),secondCompleted:t.task.filter((function(e){return!0===e.isDone}))}},W=function(){var e=Object(i.a)(),t=Object(o.a)(e,1)[0].user,a=Object(u.h)().id,s=Object(n.useState)(),c=Object(o.a)(s,2),r=c[0],l=c[1],d=Object(n.useState)(""),p=Object(o.a)(d,2),h=p[0],m=p[1],f=Object(n.useState)("Sort by"),O=Object(o.a)(f,2),x=O[0],v=O[1],k=Object(n.useState)([]),w=Object(o.a)(k,2),g=w[0],N=w[1],y=Object(n.useState)(!1),C=Object(o.a)(y,2),T=C[0],D=C[1],S=Object(n.useCallback)(Object(j.a)(b.a.mark((function e(){var a;return b.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,K(t);case 2:if(!(a=e.sent).correct){e.next=6;break}return N(a.json),e.abrupt("return");case 6:D(!0);case 7:case"end":return e.stop()}}),e)}))),[t]),A=Object(u.g)();return Object(n.useEffect)((function(){S()}),[S]),Object(n.useEffect)((function(){a&&l(!0)}),[a]),Object(_.jsxs)(_.Fragment,{children:[r&&Object(_.jsx)(R,{refreshLists:S,setOpenList:l,id:a}),!T&&Object(_.jsxs)("section",{onClick:function(){r&&(l(!1),A.push("/dashboard"))},className:"".concat(P.a.dashboard," ").concat(r?P.a.blur:null),children:[Object(_.jsx)(L,{}),Object(_.jsxs)("div",{className:P.a.main,children:[Object(_.jsxs)("div",{className:P.a.header,children:[Object(_.jsx)("label",{className:P.a.label,children:Object(_.jsx)("input",{"data-testid":"input-search",className:P.a.field,placeholder:"Search",type:"text",value:h,onChange:function(e){return m(e.target.value)}})}),Object(_.jsx)("label",{className:P.a.labelSelect,children:Object(_.jsxs)("select",{"data-testid":"select-sort",onChange:function(e){return v(e.target.value)},className:"".concat(P.a.field," ").concat(P.a.select),value:x,children:[Object(_.jsx)("option",{value:"Sort by",disabled:!0,children:"Sort by"}),Object(_.jsx)("option",{value:"completed",children:"Most completed tasks"}),Object(_.jsx)("option",{value:"uncompleted",children:"Least completed tasks"}),Object(_.jsx)("option",{value:"latest",children:"Latest"}),Object(_.jsx)("option",{value:"amount",children:"Most tasks"})]})})]}),Object(_.jsx)("div",{className:P.a.todos,children:g.filter((function(e){return e.name.toLowerCase().includes(h.toLowerCase())})).sort((function(e,t){switch(x){case"completed":var a=X(e,t);return a.secondCompleted.length-a.firstCompleted.length;case"uncompleted":var n=X(e,t);return n.firstCompleted.length-n.secondCompleted.length;case"latest":return new Date(e.published_at)>new Date(t.published_at)?-1:1;case"amount":return t.task.length-e.task.length;default:return}})).map((function(e){var t=e.id,a=e.name,n=e.published_at,s=e.task;return Object(_.jsx)(H,{id:t,name:a,published_at:n,task:s},t)}))}),Object(_.jsx)("div",{className:P.a.containerNewTodo,children:Object(_.jsx)("button",{onClick:function(){r||l(!0)},className:P.a.btn})})]})]})]})},$=function(){var e=Object(i.a)(),t=Object(o.a)(e,1)[0].user;return Object(_.jsx)(_.Fragment,{children:Object(_.jsx)(l.a,{children:Object(_.jsxs)(u.d,{children:[Object(_.jsx)(u.b,{exact:!0,path:"/dashboard/:id",children:t?Object(_.jsx)(W,{}):Object(_.jsx)(u.a,{to:"/"})}),Object(_.jsx)(u.b,{exact:!0,path:"/dashboard",children:t?Object(_.jsx)(W,{}):Object(_.jsx)(u.a,{to:"/"})}),Object(_.jsx)(u.b,{exact:!0,path:"/registration",children:t?Object(_.jsx)(u.a,{to:"/dashboard"}):Object(_.jsx)(E,{})}),Object(_.jsx)(u.b,{exact:!0,path:"/",children:t?Object(_.jsx)(u.a,{to:"/dashboard"}):Object(_.jsx)(D,{})})]})})})};a(201);r.a.render(Object(_.jsx)(s.a.StrictMode,{children:Object(_.jsx)($,{})}),document.getElementById("root"))},24:function(e,t,a){e.exports={content:"Todo_content__3sOmB",todo:"Todo_todo__1rPHp",square:"Todo_square__QHhHb",completed:"Todo_completed__3mb2q",task:"Todo_task__wevb8",delete:"Todo_delete__1pbvj"}},34:function(e,t,a){e.exports={header:"Header_header__lKNbk",name:"Header_name__2LKKb",icon:"Header_icon__38Vt7",button:"Header_button__1Mz9f",blur:"Header_blur__tXJLu"}},35:function(e,t,a){e.exports={list:"SingleList_list__2DPUH",listDate:"SingleList_listDate__2AZl9",name:"SingleList_name__2vw-s",count:"SingleList_count__2kLLV"}},4:function(e,t,a){e.exports={create:"List_create__1EigG",containerAddInput:"List_containerAddInput__2GqPU",containerTodos:"List_containerTodos__1nnYJ",label:"List_label__1pdCd",field:"List_field__27rqC",fieldAddTask:"List_fieldAddTask__kRDQv",content:"List_content__11bgd",square:"List_square__k9Pyp",containerButtons:"List_containerButtons__1gTWj",btn:"List_btn__DDeh0",btnTodo:"List_btnTodo__eqbau",btnList:"List_btnList__12GnX",cancel:"List_cancel__3pKE0",add:"List_add__nMgHP",action:"List_action__F_wBK",close:"List_close__2QcJH",delete:"List_delete__3XCyy",task:"List_task__1Istp",todo:"List_todo__std-Z",completed:"List_completed__3RBkY","fa-check":"List_fa-check___Zjnp",message:"List_message__1h3UH"}},46:function(e,t,a){e.exports={container:"Field_container__19NGF",field:"Field_field__gEjah",error:"Field_error__1Gnx0",label:"Field_label__25TRj"}},85:function(e,t,a){e.exports={btn:"FormButton_btn__3wAi0"}}},[[202,1,2]]]);
//# sourceMappingURL=main.4d6cc598.chunk.js.map