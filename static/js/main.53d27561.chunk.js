(this["webpackJsonptodo-rekrutacja"]=this["webpackJsonptodo-rekrutacja"]||[]).push([[0],{10:function(e,t,a){e.exports={container:"Auth_container__DLp8M",formText:"Auth_formText__IrzHq",form:"Auth_form__1U8iO",icon:"Auth_icon__U5zUR",action:"Auth_action__r8qKH",link:"Auth_link__2vbjZ",text:"Auth_text__2mK62",error:"Auth_error__Rd2bV",success:"Auth_success__3ErGC"}},14:function(e,t,a){e.exports={dashboard:"Dashboard_dashboard__1l120",main:"Dashboard_main__3SXLX",header:"Dashboard_header__2n_LS",containerNewTodo:"Dashboard_containerNewTodo__yC2o2",btn:"Dashboard_btn__1mwS5",label:"Dashboard_label__1NCam",labelSelect:"Dashboard_labelSelect__2W2OF",field:"Dashboard_field__3O5NP",select:"Dashboard_select__2bT_A",blur:"Dashboard_blur__2V9gS"}},202:function(e,t,a){},203:function(e,t,a){"use strict";a.r(t);var n=a(0),s=a.n(n),c=a(32),r=a.n(c),i=a(2),o=a(206),l=a(26),d=a(5),u=a(7),j=a.n(u),b=a(15),m=a(8),h=a(48),p=a.n(h),O=a(21),f=a(1),_=function(e){var t=Object.assign({},e),a=Object(O.c)(t),s=Object(i.a)(a,2),c=s[0],r=s[1],o=r.touched&&r.error?r.error:"",l=Object(n.useState)(!1),d=Object(i.a)(l,2),u=d[0],j=d[1];return Object(f.jsxs)("label",{onFocus:function(){return j(!u)},onBlur:function(){return j(!u)},className:p.a.label,children:[Object(f.jsx)("input",Object(m.a)(Object(m.a)(Object(m.a)({},t),c),{},{className:p.a.field,"data-testid":"input"})),Object(f.jsx)("p",{"data-testid":"message-validation",className:p.a.error,children:o})]})},x=a(86),v=a.n(x),N=function(e){var t=e.text;return Object(f.jsx)("button",{"data-testid":"btn-auth",type:"submit",className:v.a.btn,children:t})},w=a(10),g=a.n(w),k=a(35),y=a.n(k),L=function(){var e=Object(o.a)(),t=Object(i.a)(e,3),a=t[0],n=t[2],s=a.user;return Object(f.jsxs)("header",{className:y.a.header,children:[Object(f.jsx)("div",{children:Object(f.jsx)("h2",{className:y.a.name,children:"ToDo-List"})}),s&&Object(f.jsx)("div",{children:Object(f.jsx)("button",{onClick:function(){n("user")},className:y.a.button,children:Object(f.jsx)("i",{className:"fas fa-sign-out-alt ".concat(y.a.icon)})})})]})},S=function(){var e=Object(o.a)(),t=Object(i.a)(e,2)[1],a=Object(n.useState)(""),s=Object(i.a)(a,2),c=s[0],r=s[1],u=Object(d.g)(),m=function(){var e=Object(b.a)(j.a.mark((function e(a){var n,s;return j.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,fetch("".concat("https://recruitment.ultimate.systems","/auth/local"),{method:"POST",mode:"cors",headers:{"Content-Type":"application/json"},body:JSON.stringify(a)});case 2:return n=e.sent,e.next=5,n.json();case 5:if(400!==(s=e.sent).statusCode){e.next=9;break}return r(s.message[0].messages[0].message),e.abrupt("return");case 9:if(!s.jwt){e.next=13;break}return t("user",s),u.push("/dashboard"),e.abrupt("return");case 13:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}();return Object(f.jsxs)(f.Fragment,{children:[Object(f.jsx)(L,{}),Object(f.jsxs)("div",{className:g.a.container,children:[Object(f.jsx)(O.b,{initialValues:{identifier:"",password:""},onSubmit:function(e){return m(e)},children:Object(f.jsxs)(O.a,{className:g.a.form,children:[Object(f.jsx)("h3",{className:g.a.formText,"data-testid":"headline",children:"Login"}),Object(f.jsx)(_,{name:"identifier",type:"text",id:"identifier",placeholder:"Email or Username"},"identifier-field"),Object(f.jsx)(_,{name:"password",type:"password",id:"password",placeholder:"Password"},"password-field"),Object(f.jsx)("p",{className:g.a.error,children:c}),Object(f.jsx)(N,{text:"Login"})]})}),Object(f.jsxs)("div",{className:g.a.action,children:[Object(f.jsx)("span",{className:g.a.text,children:"or"}),Object(f.jsx)(l.b,{className:g.a.link,to:"/registration",children:"create an account"})]})]})]})},C=a(24),D=C.a({username:C.c().min(1,"Must be at least 2 characters long").defined("Field is required"),email:C.c().email("Email is invalid").defined("Email is required"),password:C.c().min(8,"Password to short! Must be at least 8 characters long").defined("Field is required"),repeatPassword:C.c().oneOf([C.b("password"),null],"Passwords do not match").defined("Field is required")}),T=function(){var e=Object(n.useState)({type:"",message:""}),t=Object(i.a)(e,2),a=t[0],s=t[1];console.log("https://recruitment.ultimate.systems");var c=Object(d.g)(),r=function(){var e=Object(b.a)(j.a.mark((function e(t){var a,n,r;return j.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a={username:t.username,email:t.email,password:t.password},e.next=3,fetch("".concat("https://recruitment.ultimate.systems","/auth/local/register"),{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(a)});case 3:return n=e.sent,e.next=6,n.json();case 6:400===(r=e.sent).statusCode&&s({type:"invalid",message:r.message[0].messages[0].message}),r.jwt&&(s({type:"valid",message:"Your account has been created"}),setTimeout((function(){c.push("/")}),1500));case 9:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}();return Object(f.jsxs)(f.Fragment,{children:[Object(f.jsx)(L,{}),Object(f.jsxs)("div",{className:g.a.container,children:[Object(f.jsx)(l.b,{to:"/",children:Object(f.jsx)("i",{className:"fas fa-long-arrow-alt-left fa-3x ".concat(g.a.icon)})}),Object(f.jsx)(O.b,{initialValues:{username:"",email:"",password:"",repeatPassword:""},validationSchema:D,onSubmit:function(e){return r(e)},children:Object(f.jsxs)(O.a,{className:g.a.form,children:[Object(f.jsx)("h3",{className:g.a.formText,children:"Create an new account"}),Object(f.jsx)(_,{name:"username",type:"text",id:"username",placeholder:"Username"},"username-field"),Object(f.jsx)(_,{name:"email",type:"email",id:"email",placeholder:"Email"},"email-field"),Object(f.jsx)(_,{name:"password",type:"password",id:"password",placeholder:"Password"},"password-field"),Object(f.jsx)(_,{name:"repeatPassword",type:"password",id:"repeat-password",placeholder:"Repeat password"},"repeat-password-field"),Object(f.jsx)(N,{text:"Create"}),Object(f.jsx)("p",{className:"invalid"===a.type?"".concat(g.a.error):"".concat(g.a.success),children:a.message})]})})]})]})},A=a(205),E=a(207),q=Object(E.a)({initialState:{data:{id:null,isNew:!0}},actions:{getId:function(e,t){return function(a){a.getState;(0,a.setState)({data:{id:e,isNew:t}})}}}}),F=Object(A.a)(q),B=a(14),P=a.n(B),I=a(9),z=a(3),H=a.n(z),J=function(e){var t=e.name,a=e.isDone,n=e.id,s=e.list,c=e.setList,r=s.task;return Object(f.jsxs)("div",{className:"".concat(H.a.content," ").concat(H.a.todo),children:[Object(f.jsx)("button",{onClick:function(){!function(){var e=r.find((function(e){return e.id===n}));e.isDone=!e.isDone,c(Object(m.a)(Object(m.a)({},s),{},{task:Object(I.a)(r)}))}()},className:"".concat(H.a.square," ").concat(a?H.a.completed:null),children:a&&Object(f.jsx)("i",{className:"fas fa-check"})}),Object(f.jsx)("p",{"data-testid":"todo-name",className:H.a.task,children:t})]})},M=function(e){var t=e.setOpenList,a=e.refreshLists,s=F(),c=Object(i.a)(s,1)[0],r=Object(n.useState)({name:"",task:[]}),l=Object(i.a)(r,2),d=l[0],u=l[1],h=c.data,p=Object(n.useState)(""),O=Object(i.a)(p,2),_=O[0],x=O[1],v=Object(n.useState)({name:"",isDone:!1}),N=Object(i.a)(v,2),w=N[0],g=N[1],k=Object(o.a)(),y=Object(i.a)(k,1)[0].user,L=function(){var e=Object(b.a)(j.a.mark((function e(){var t,a;return j.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,fetch("".concat("https://recruitment.ultimate.systems","/to-do-lists/").concat(h.id),{method:"GET",headers:{"Content-Type":"application/json",Authorization:"Bearer ".concat(y.jwt)}});case 2:return t=e.sent,e.next=5,t.json();case 5:a=e.sent,u({name:a.name,task:a.task});case 7:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),S=function(e){return d.name.length>0||(x("Name of list cannot be empty"),!1)},C=function(){a(),t(!1)},D=function(){var e=Object(b.a)(j.a.mark((function e(){return j.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!S()){e.next=5;break}return e.next=4,fetch("".concat("https://recruitment.ultimate.systems","/to-do-lists"),{method:"POST",headers:{"Content-Type":"application/json",Authorization:"Bearer ".concat(y.jwt)},body:JSON.stringify(d)});case 4:C();case 5:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),T=function(){var e=Object(b.a)(j.a.mark((function e(){return j.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!S()){e.next=5;break}return e.next=4,fetch("".concat("https://recruitment.ultimate.systems","/to-do-lists/").concat(c.data.id),{method:"PUT",headers:{"Content-Type":"application/json",Authorization:"Bearer ".concat(y.jwt)},body:JSON.stringify(d)});case 4:C();case 5:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),A=function(){var e=Object(b.a)(j.a.mark((function e(){return j.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,fetch("".concat("https://recruitment.ultimate.systems","/to-do-lists/").concat(c.data.id),{method:"DELETE",headers:{"Content-Type":"application/json",Authorization:"Bearer ".concat(y.jwt)}});case 2:C();case 3:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();return Object(n.useEffect)((function(){null!==c.data.id&&L()}),[]),Object(f.jsxs)("div",{"data-testid":"list",className:H.a.create,children:[Object(f.jsxs)("div",{children:[Object(f.jsx)("label",{className:H.a.label,children:Object(f.jsx)("input",{onChange:function(e){return u(Object(m.a)(Object(m.a)({},d),{},{name:e.target.value}))},placeholder:"List name",className:H.a.field,type:"text",value:d.name,"data-testid":"input"})}),Object(f.jsx)("div",{className:H.a.containerTodos,children:d.task.map((function(e,t){var a=e.name,n=e.isDone,s=e.id;return Object(f.jsx)(J,{list:d,setList:u,name:a,isDone:n,id:s},t)}))}),Object(f.jsx)("div",{className:H.a.containerAddInput,children:Object(f.jsxs)("label",{children:[Object(f.jsxs)("div",{className:H.a.content,children:[Object(f.jsx)("button",{onClick:function(){return g(Object(m.a)(Object(m.a)({},w),{},{isDone:!w.isDone}))},className:"".concat(H.a.square," ").concat(w.isDone?H.a.completed:null),children:w.isDone&&Object(f.jsx)("i",{className:"fas fa-check"})}),Object(f.jsx)("input",{placeholder:"Task name",className:H.a.fieldAddTask,type:"text",value:w.name,onChange:function(e){return g(Object(m.a)(Object(m.a)({},w),{},{name:e.target.value}))},"data-testid":"input"})]}),Object(f.jsxs)("div",{className:H.a.containerButtons,children:[Object(f.jsx)("button",{onClick:function(){return g({name:"",isDone:!1})},className:"".concat(H.a.btn," ").concat(H.a.cancel),children:"Cancel"}),Object(f.jsx)("button",{onClick:function(){w.name.length>0&&(u(Object(m.a)(Object(m.a)({},d),{},{task:[].concat(Object(I.a)(d.task),[w])})),g({name:"",isDone:!1}))},className:"".concat(H.a.btn," ").concat(H.a.add),children:"Add"}),Object(f.jsx)("p",{className:H.a.message,children:_})]})]})})]}),Object(f.jsxs)("div",{className:H.a.action,children:[!h.isNew&&Object(f.jsx)("button",{className:"".concat(H.a.btn," ").concat(H.a.delete),onClick:A,children:"Delete"}),Object(f.jsx)("button",{onClick:function(){t(!1)},className:"".concat(H.a.btn," ").concat(H.a.close),children:"Cancel"}),Object(f.jsx)("button",{onClick:function(){h.isNew?D():T()},className:"".concat(H.a.btn," ").concat(H.a.add),children:"Save"})]})]})},U=a(36),V=a.n(U),R=function(e){var t=e.name,a=e.published_at,n=e.id,s=e.task,c=e.setOpenList,r=F(),o=Object(i.a)(r,2)[1];return Object(f.jsxs)("div",{onClick:function(){o.getId(n,!1),c(!0)},className:V.a.list,"data-testid":"list",children:[Object(f.jsx)("h5",{"data-testid":"name-of-list",className:V.a.name,children:t}),Object(f.jsxs)("p",{className:V.a.listDate,children:["Created at: ",function(){var e=new Date(a),t=e.getFullYear(),n=e.getMonth()+1,s=e.getDate();return n<10&&(n="0".concat(n)),s<10&&(s="0".concat(s)),"".concat(s,"-").concat(n,"-").concat(t)}()]}),Object(f.jsx)("p",{"data-testid":"count-list",className:V.a.count,children:function(){var e=s.filter((function(e){return!0===e.isDone})),t=s.filter((function(e){return!1===e.isDone}));return"Completed: ".concat(e.length," Uncompleted: ").concat(t.length," All: ").concat(s.length)}()})]})},G=function(){var e=Object(o.a)(),t=Object(i.a)(e,1)[0].user,a=F(),s=Object(i.a)(a,2)[1],c=Object(n.useState)(!1),r=Object(i.a)(c,2),l=r[0],d=r[1],u=Object(n.useState)(""),m=Object(i.a)(u,2),h=m[0],p=m[1],O=Object(n.useState)("Sort by"),_=Object(i.a)(O,2),x=_[0],v=_[1],N=Object(n.useState)([]),w=Object(i.a)(N,2),g=w[0],k=w[1],y=Object(n.useState)(!1),S=Object(i.a)(y,2),C=S[0],D=S[1],T=function(){var e=Object(b.a)(j.a.mark((function e(){var a,n;return j.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,fetch("".concat("https://recruitment.ultimate.systems","/to-do-lists"),{method:"GET",headers:{"Content-Type":"application/json",Authorization:"Bearer ".concat(t.jwt)}});case 3:return a=e.sent,e.next=6,a.json();case 6:n=e.sent,k(n),e.next=13;break;case 10:e.prev=10,e.t0=e.catch(0),D(!0);case 13:case"end":return e.stop()}}),e,null,[[0,10]])})));return function(){return e.apply(this,arguments)}}();return Object(n.useEffect)((function(){T()}),[]),Object(f.jsxs)(f.Fragment,{children:[l&&Object(f.jsx)(M,{refreshLists:T,setOpenList:d}),!C&&Object(f.jsxs)("section",{onClick:function(){l&&d(!1)},className:"".concat(P.a.dashboard," ").concat(l?P.a.blur:null),children:[Object(f.jsx)(L,{}),Object(f.jsxs)("div",{className:P.a.main,children:[Object(f.jsxs)("div",{className:P.a.header,children:[Object(f.jsx)("label",{className:P.a.label,children:Object(f.jsx)("input",{"data-testid":"input-search",className:P.a.field,placeholder:"Search",type:"text",value:h,onChange:function(e){return p(e.target.value)}})}),Object(f.jsx)("label",{className:P.a.labelSelect,children:Object(f.jsxs)("select",{"data-testid":"select-sort",onChange:function(e){return v(e.target.value)},className:"".concat(P.a.field," ").concat(P.a.select),value:x,children:[Object(f.jsx)("option",{value:"Sort by",disabled:!0,children:"Sort by"}),Object(f.jsx)("option",{value:"completed",children:"Most completed tasks"}),Object(f.jsx)("option",{value:"uncompleted",children:"Least completed tasks"}),Object(f.jsx)("option",{value:"latest",children:"Latest"}),Object(f.jsx)("option",{value:"amount",children:"Most tasks"})]})})]}),Object(f.jsx)("div",{className:P.a.todos,children:g.filter((function(e){return e.name.toLowerCase().includes(h.toLowerCase())})).sort((function(e,t){var a=function(e,t){return{firstCompleted:e.task.filter((function(e){return!0===e.isDone})),secondCompleted:t.task.filter((function(e){return!0===e.isDone}))}}(e,t);switch(x){case"completed":return a.secondCompleted.length-a.firstCompleted.length;case"uncompleted":return a.firstCompleted.length-a.secondCompleted.length;case"latest":return new Date(e.published_at)>new Date(t.published_at)?-1:1;case"amount":return t.task.length-e.task.length}})).map((function(e){var t=e.id,a=e.name,n=e.published_at,s=e.task;return Object(f.jsx)(R,{id:t,name:a,published_at:n,task:s,setOpenList:d,openList:l},t)}))}),Object(f.jsx)("div",{className:P.a.containerNewTodo,children:Object(f.jsx)("button",{onClick:function(){s.getId(null,!0),l||d(!0)},className:P.a.btn})})]})]})]})},K=function(){var e=Object(o.a)(),t=Object(i.a)(e,1)[0].user;return Object(f.jsx)(f.Fragment,{children:Object(f.jsx)(l.a,{children:Object(f.jsxs)(d.d,{children:[Object(f.jsx)(d.b,{exact:!0,path:"/dashboard",children:t?Object(f.jsx)(G,{}):Object(f.jsx)(d.a,{to:"/"})}),Object(f.jsx)(d.b,{exact:!0,path:"/registration",children:t?Object(f.jsx)(d.a,{to:"/dashboard"}):Object(f.jsx)(T,{})}),Object(f.jsx)(d.b,{exact:!0,path:"/",children:t?Object(f.jsx)(d.a,{to:"/dashboard"}):Object(f.jsx)(S,{})})]})})})};a(202);r.a.render(Object(f.jsx)(s.a.StrictMode,{children:Object(f.jsx)(K,{})}),document.getElementById("root"))},3:function(e,t,a){e.exports={create:"List_create__2-pVh",containerAddInput:"List_containerAddInput__1Y6VN",containerTodos:"List_containerTodos__IzZwJ",label:"List_label__RTqw5",field:"List_field__2v575",fieldAddTask:"List_fieldAddTask__20wqd",content:"List_content__21NjZ",square:"List_square__2CnO7",containerButtons:"List_containerButtons__2nWtq",btn:"List_btn__2H9SS",cancel:"List_cancel__1FGW-",add:"List_add__1BhEi",action:"List_action__10mlQ",close:"List_close__vmuVI",delete:"List_delete__3xIQA",task:"List_task__1JwwN",todo:"List_todo__b0dEm",completed:"List_completed__7t-48","fa-check":"List_fa-check__1xGqX",message:"List_message__3ilOH"}},35:function(e,t,a){e.exports={header:"Header_header__lKNbk",name:"Header_name__2LKKb",icon:"Header_icon__38Vt7",button:"Header_button__1Mz9f",blur:"Header_blur__tXJLu"}},36:function(e,t,a){e.exports={list:"SingleList_list__2NsRq",listDate:"SingleList_listDate__2EhzS",name:"SingleList_name__3RhUu",count:"SingleList_count__1ENwS"}},48:function(e,t,a){e.exports={label:"Field_label__25TRj",field:"Field_field__gEjah",error:"Field_error__1Gnx0"}},86:function(e,t,a){e.exports={btn:"FormButton_btn__3wAi0"}}},[[203,1,2]]]);
//# sourceMappingURL=main.53d27561.chunk.js.map