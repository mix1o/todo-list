(this["webpackJsonptodo-rekrutacja"]=this["webpackJsonptodo-rekrutacja"]||[]).push([[0],{11:function(e,t,a){e.exports={container:"Auth_container__3sNPm",formText:"Auth_formText__1g8l8",upper:"Auth_upper__2eOfG",form:"Auth_form__15skY",icon:"Auth_icon__2uB7E",action:"Auth_action__1IGJK",link:"Auth_link__3CDoQ",text:"Auth_text__1N5zJ",error:"Auth_error__3GZiJ",success:"Auth_success__3VbrN"}},15:function(e,t,a){e.exports={dashboard:"Dashboard_dashboard__1TtZL",main:"Dashboard_main__2sLdU",header:"Dashboard_header__Z_7Zm",containerNewTodo:"Dashboard_containerNewTodo__25Qqp",btn:"Dashboard_btn__1cr7v",label:"Dashboard_label__2ZL0Z",labelSelect:"Dashboard_labelSelect__3DKvi",field:"Dashboard_field__3AVyE",select:"Dashboard_select__1qO34",blur:"Dashboard_blur__2nqZk"}},203:function(e,t,a){},204:function(e,t,a){"use strict";a.r(t);var n=a(0),s=a.n(n),c=a(33),r=a.n(c),i=a(3),o=a(207),l=a(27),d=a(7),u=a(2),b=a.n(u),j=a(6),p=a(9),m=a(49),h=a.n(m),f=a(21),_=a(1),O=function(e){var t=Object.assign({},e),a=Object(f.c)(t),n=Object(i.a)(a,2),s=n[0],c=n[1],r=c.touched&&c.error?c.error:"";return Object(_.jsxs)("div",{className:h.a.container,children:[Object(_.jsx)("input",Object(p.a)(Object(p.a)(Object(p.a)({},t),s),{},{className:h.a.field,"data-testid":t["data-testid"]||"input"})),Object(_.jsx)("p",{"data-testid":"message-validation",className:h.a.error,children:r})]})},x=a(87),v=a.n(x),k=function(e){var t=e.text;return Object(_.jsx)("button",{"data-testid":"btn-auth",type:"submit",className:v.a.btn,children:t})},w=a(11),N=a.n(w),g=a(36),y=a.n(g),L=function(){var e=Object(o.a)(),t=Object(i.a)(e,3),a=t[0],n=t[2],s=a.user;return Object(_.jsxs)("header",{className:y.a.header,children:[Object(_.jsx)("div",{children:Object(_.jsx)("h2",{className:y.a.name,children:"ToDo-List"})}),s&&Object(_.jsx)("div",{children:Object(_.jsx)("button",{onClick:function(){n("user")},className:y.a.button,children:Object(_.jsx)("i",{className:"fas fa-sign-out-alt ".concat(y.a.icon)})})})]})},C=function(){var e=Object(j.a)(b.a.mark((function e(t){var a,n;return b.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,fetch("".concat("https://recruitment.ultimate.systems","/auth/local"),{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(t)});case 2:return a=e.sent,e.next=5,a.json();case 5:return n=e.sent,e.abrupt("return",n);case 7:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),T=function(){var e=Object(o.a)(),t=Object(i.a)(e,2)[1],a=Object(n.useState)(""),s=Object(i.a)(a,2),c=s[0],r=s[1],u=Object(d.g)(),p=function(){var e=Object(j.a)(b.a.mark((function e(a){var n;return b.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,C(a);case 2:if(400!==(n=e.sent).statusCode){e.next=6;break}try{r(n.message[0].messages[0].message)}catch(s){r("Error")}return e.abrupt("return");case 6:if(!n.jwt){e.next=10;break}return t("user",n.jwt),u.push("/dashboard"),e.abrupt("return");case 10:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}();return Object(_.jsxs)(_.Fragment,{children:[Object(_.jsx)(L,{}),Object(_.jsxs)("div",{className:N.a.container,children:[Object(_.jsx)(f.b,{initialValues:{identifier:"",password:""},onSubmit:function(e){return p(e)},children:Object(_.jsxs)(f.a,{className:N.a.form,children:[Object(_.jsx)("h3",{className:N.a.formText,"data-testid":"headline",children:"Login"}),Object(_.jsx)(O,{name:"identifier",type:"text",id:"identifier",placeholder:"Email or Username","data-testid":"login-field"},"identifier-field"),Object(_.jsx)(O,{name:"password",type:"password",id:"password",placeholder:"Password"},"password-field"),Object(_.jsx)("p",{className:N.a.error,children:c}),Object(_.jsx)(k,{text:"Login"})]})}),Object(_.jsxs)("div",{className:N.a.action,children:[Object(_.jsx)("span",{className:N.a.text,children:"or"}),Object(_.jsx)(l.b,{className:N.a.link,to:"/registration",children:"create an account"})]})]})]})},D=a(25),S=D.a({username:D.c().min(1,"Must be at least 2 characters long").defined("Field is required"),email:D.c().email("Email is invalid").defined("Email is required"),password:D.c().min(8,"Password to short! Must be at least 8 characters long").defined("Field is required"),repeatPassword:D.c().oneOf([D.b("password"),null],"Passwords do not match").defined("Field is required")}),A=function(){var e=Object(j.a)(b.a.mark((function e(t){var a,n,s;return b.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a={username:t.username,email:t.email,password:t.password},e.next=3,fetch("".concat("https://recruitment.ultimate.systems","/auth/local/register"),{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(a)});case 3:return n=e.sent,e.next=6,n.json();case 6:return s=e.sent,e.abrupt("return",s);case 8:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),E=function(){var e=Object(n.useState)({type:"",message:""}),t=Object(i.a)(e,2),a=t[0],s=t[1],c=Object(d.g)(),r=function(){var e=Object(j.a)(b.a.mark((function e(t){var a;return b.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,A(t);case 2:if(400===(a=e.sent).statusCode)try{s({type:"invalid",message:a.message[0].messages[0].message})}catch(n){s({type:"invalid",message:"Error"})}a.jwt&&(s({type:"valid",message:"Your account has been created"}),setTimeout((function(){c.push("/")}),1500));case 5:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}();return Object(_.jsxs)(_.Fragment,{children:[Object(_.jsx)(L,{}),Object(_.jsxs)("div",{className:N.a.container,children:[Object(_.jsx)(l.b,{to:"/",children:Object(_.jsx)("i",{className:"fas fa-long-arrow-alt-left fa-3x ".concat(N.a.icon)})}),Object(_.jsx)(f.b,{initialValues:{username:"",email:"",password:"",repeatPassword:""},validationSchema:S,onSubmit:function(e){return r(e)},children:Object(_.jsxs)(f.a,{className:N.a.form,children:[Object(_.jsx)("h3",{className:"".concat(N.a.formText," ").concat(N.a.upper),children:"Create an new account"}),Object(_.jsx)(O,{name:"username",type:"text",id:"username",placeholder:"Username","data-testid":"username"},"username-field"),Object(_.jsx)(O,{name:"email",type:"email",id:"email",placeholder:"Email"},"email-field"),Object(_.jsx)(O,{name:"password",type:"password",id:"password",placeholder:"Password"},"password-field"),Object(_.jsx)(O,{name:"repeatPassword",type:"password",id:"repeat-password",placeholder:"Repeat password"},"repeat-password-field"),Object(_.jsx)(k,{text:"Create"}),Object(_.jsx)("p",{className:"invalid"===a.type?"".concat(N.a.error):"".concat(N.a.success),children:a.message})]})})]})]})},q=a(206),P=a(208),F=Object(P.a)({initialState:{data:{id:null,isNew:!0}},actions:{getId:function(e,t){return function(a){a.getState;(0,a.setState)({data:{id:e,isNew:t}})}}}}),B=Object(q.a)(F),H=a(15),J=a.n(H),G=a(37),Z=a.n(G),I=function(e){var t=e.name,a=e.published_at,n=e.id,s=e.task,c=e.setOpenList,r=function(e){var t=new Date(e),a=t.getFullYear(),n=t.getMonth()+1,s=t.getDate();return n<10&&(n="0".concat(n)),s<10&&(s="0".concat(s)),"".concat(s,"-").concat(n,"-").concat(a)}(a),o=function(e){var t=e.filter((function(e){return!0===e.isDone})),a=e.filter((function(e){return!1===e.isDone}));return"Completed: ".concat(t.length," Uncompleted: ").concat(a.length," All: ").concat(e.length)}(s),l=B(),d=Object(i.a)(l,2)[1];return Object(_.jsxs)("div",{onClick:function(){d.getId(n,!1),c(!0)},className:Z.a.list,"data-testid":"list",children:[Object(_.jsx)("h5",{"data-testid":"name-of-list",className:Z.a.name,children:t}),Object(_.jsxs)("p",{className:Z.a.listDate,children:["Created at: ",r]}),Object(_.jsx)("p",{"data-testid":"count-list",className:Z.a.count,children:o})]})},M=a(10),U=a(4),z=a.n(U),K=a(24),V=a.n(K),Q=function(e){var t=e.name,a=e.isDone,n=e.id,s=e.list,c=e.setList,r=s.task;return Object(_.jsxs)("div",{className:"".concat(V.a.content," ").concat(V.a.todo),children:[Object(_.jsx)("button",{onClick:function(){r[n].isDone=!r[n].isDone,c(Object(p.a)(Object(p.a)({},s),{},{task:Object(M.a)(r)}))},className:"".concat(V.a.square," ").concat(a?V.a.completed:null),children:a&&Object(_.jsx)("i",{className:"fas fa-check"})}),Object(_.jsx)("p",{"data-testid":"todo-name",className:V.a.task,children:t}),Object(_.jsx)("button",{className:V.a.delete,onClick:function(){var e=Object(M.a)(r);e.splice(n,1),c(Object(p.a)(Object(p.a)({},s),{},{task:e}))},children:Object(_.jsx)("i",{className:"fas fa-times"})})]})},Y=function(){var e=Object(j.a)(b.a.mark((function e(t,a){var n,s;return b.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,fetch("".concat("https://recruitment.ultimate.systems","/to-do-lists/").concat(a),{method:"GET",headers:{"Content-Type":"application/json",Authorization:"Bearer ".concat(t)}});case 2:return n=e.sent,e.next=5,n.json();case 5:return s=e.sent,e.abrupt("return",s);case 7:case"end":return e.stop()}}),e)})));return function(t,a){return e.apply(this,arguments)}}(),R=function(){var e=Object(j.a)(b.a.mark((function e(t,a){return b.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,fetch("".concat("https://recruitment.ultimate.systems","/to-do-lists"),{method:"POST",headers:{"Content-Type":"application/json",Authorization:"Bearer ".concat(t)},body:JSON.stringify(a)});case 2:case"end":return e.stop()}}),e)})));return function(t,a){return e.apply(this,arguments)}}(),X=function(){var e=Object(j.a)(b.a.mark((function e(t,a,n){return b.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,fetch("".concat("https://recruitment.ultimate.systems","/to-do-lists/").concat(n),{method:"PUT",headers:{"Content-Type":"application/json",Authorization:"Bearer ".concat(t)},body:JSON.stringify(a)});case 2:case"end":return e.stop()}}),e)})));return function(t,a,n){return e.apply(this,arguments)}}(),W=function(){var e=Object(j.a)(b.a.mark((function e(t,a){return b.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,fetch("".concat("https://recruitment.ultimate.systems","/to-do-lists/").concat(a),{method:"DELETE",headers:{"Content-Type":"application/json",Authorization:"Bearer ".concat(t)}});case 2:case"end":return e.stop()}}),e)})));return function(t,a){return e.apply(this,arguments)}}(),$=function(e){var t=e.setOpenList,a=e.refreshLists,s=B(),c=Object(i.a)(s,1)[0],r=Object(n.useState)({name:"",task:[]}),l=Object(i.a)(r,2),d=l[0],u=l[1],m=c.data,h=Object(n.useState)(""),f=Object(i.a)(h,2),O=f[0],x=f[1],v=Object(n.useState)({name:"",isDone:!1}),k=Object(i.a)(v,2),w=k[0],N=k[1],g=Object(o.a)(),y=Object(i.a)(g,1)[0].user,L=function(){return d.name.length>0||(x("Name of list cannot be empty"),!1)},C=function(){a(),t(!1)},T=function(){var e=Object(j.a)(b.a.mark((function e(){return b.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!L()){e.next=5;break}return e.next=4,R(y,d);case 4:C();case 5:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),D=function(){var e=Object(j.a)(b.a.mark((function e(){return b.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!L()){e.next=5;break}return e.next=4,X(y,d,c.data.id);case 4:C();case 5:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),S=function(){var e=Object(j.a)(b.a.mark((function e(){return b.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,W(y,c.data.id);case 2:C();case 3:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();return Object(n.useEffect)((function(){null!==c.data.id&&Object(j.a)(b.a.mark((function e(){var t;return b.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Y(y,c.data.id);case 2:t=e.sent,u({name:t.name,task:t.task});case 4:case"end":return e.stop()}}),e)})))()}),[c.data.id,y]),Object(_.jsxs)("div",{"data-testid":"list",className:z.a.create,children:[Object(_.jsxs)("div",{children:[Object(_.jsx)("div",{className:z.a.label,children:Object(_.jsx)("input",{onChange:function(e){return u(Object(p.a)(Object(p.a)({},d),{},{name:e.target.value}))},placeholder:"List name",className:z.a.field,type:"text",value:d.name,"data-testid":"list-name"})}),Object(_.jsx)("div",{className:z.a.containerTodos,children:d.task.map((function(e,t){var a=e.name,n=e.isDone;return Object(_.jsx)(Q,{id:t,list:d,setList:u,name:a,isDone:n},t)}))}),Object(_.jsxs)("div",{className:z.a.containerAddInput,children:[Object(_.jsxs)("div",{className:z.a.content,children:[Object(_.jsx)("button",{onClick:function(){return N(Object(p.a)(Object(p.a)({},w),{},{isDone:!w.isDone}))},className:"".concat(z.a.square," ").concat(w.isDone?z.a.completed:null),children:w.isDone&&Object(_.jsx)("i",{className:"fas fa-check"})}),Object(_.jsx)("input",{placeholder:"Task name",className:z.a.fieldAddTask,type:"text",value:w.name,onChange:function(e){return N(Object(p.a)(Object(p.a)({},w),{},{name:e.target.value}))},"data-testid":"todo-name"})]}),Object(_.jsxs)("div",{className:z.a.containerButtons,children:[Object(_.jsx)("button",{onClick:function(){return N({name:"",isDone:!1})},className:"".concat(z.a.btn," ").concat(z.a.btnTodo," ").concat(z.a.cancel),children:"Cancel"}),Object(_.jsx)("button",{onClick:function(){w.name.length>0&&(u(Object(p.a)(Object(p.a)({},d),{},{task:[].concat(Object(M.a)(d.task),[w])})),N({name:"",isDone:!1}))},className:"".concat(z.a.btn," ").concat(z.a.btnTodo," ").concat(z.a.add),children:"Add"}),Object(_.jsx)("p",{className:z.a.message,children:O})]})]})]}),Object(_.jsxs)("div",{className:z.a.action,children:[!m.isNew&&Object(_.jsx)("button",{className:"".concat(z.a.btn," ").concat(z.a.btnList," ").concat(z.a.delete),onClick:S,children:"Delete"}),Object(_.jsx)("button",{onClick:function(){t(!1)},className:"".concat(z.a.btn," ").concat(z.a.btnList," ").concat(z.a.close),children:"Cancel"}),Object(_.jsx)("button",{onClick:function(){m.isNew?T():D()},className:"".concat(z.a.btn," ").concat(z.a.btnList," ").concat(z.a.add),children:"Save"})]})]})},ee=function(){var e=Object(j.a)(b.a.mark((function e(t){var a,n;return b.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,fetch("".concat("https://recruitment.ultimate.systems","/to-do-lists"),{method:"GET",headers:{"Content-Type":"application/json",Authorization:"Bearer ".concat(t)}});case 3:return a=e.sent,e.next=6,a.json();case 6:return n=e.sent,e.abrupt("return",{json:n,correct:!0});case 10:return e.prev=10,e.t0=e.catch(0),e.abrupt("return",{correct:!1});case 13:case"end":return e.stop()}}),e,null,[[0,10]])})));return function(t){return e.apply(this,arguments)}}(),te=function(e,t){return{firstCompleted:e.task.filter((function(e){return!0===e.isDone})),secondCompleted:t.task.filter((function(e){return!0===e.isDone}))}},ae=function(){var e=Object(o.a)(),t=Object(i.a)(e,1)[0].user,a=B(),s=Object(i.a)(a,2)[1],c=Object(n.useState)(!1),r=Object(i.a)(c,2),l=r[0],d=r[1],u=Object(n.useState)(""),p=Object(i.a)(u,2),m=p[0],h=p[1],f=Object(n.useState)("Sort by"),O=Object(i.a)(f,2),x=O[0],v=O[1],k=Object(n.useState)([]),w=Object(i.a)(k,2),N=w[0],g=w[1],y=Object(n.useState)(!1),C=Object(i.a)(y,2),T=C[0],D=C[1],S=Object(n.useCallback)(Object(j.a)(b.a.mark((function e(){var a;return b.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,ee(t);case 2:if(!(a=e.sent).correct){e.next=6;break}return g(a.json),e.abrupt("return");case 6:D(!0);case 7:case"end":return e.stop()}}),e)}))),[t]);return Object(n.useEffect)((function(){S()}),[S]),Object(_.jsxs)(_.Fragment,{children:[l&&Object(_.jsx)($,{refreshLists:S,setOpenList:d}),!T&&Object(_.jsxs)("section",{onClick:function(){l&&d(!1)},className:"".concat(J.a.dashboard," ").concat(l?J.a.blur:null),children:[Object(_.jsx)(L,{}),Object(_.jsxs)("div",{className:J.a.main,children:[Object(_.jsxs)("div",{className:J.a.header,children:[Object(_.jsx)("label",{className:J.a.label,children:Object(_.jsx)("input",{"data-testid":"input-search",className:J.a.field,placeholder:"Search",type:"text",value:m,onChange:function(e){return h(e.target.value)}})}),Object(_.jsx)("label",{className:J.a.labelSelect,children:Object(_.jsxs)("select",{"data-testid":"select-sort",onChange:function(e){return v(e.target.value)},className:"".concat(J.a.field," ").concat(J.a.select),value:x,children:[Object(_.jsx)("option",{value:"Sort by",disabled:!0,children:"Sort by"}),Object(_.jsx)("option",{value:"completed",children:"Most completed tasks"}),Object(_.jsx)("option",{value:"uncompleted",children:"Least completed tasks"}),Object(_.jsx)("option",{value:"latest",children:"Latest"}),Object(_.jsx)("option",{value:"amount",children:"Most tasks"})]})})]}),Object(_.jsx)("div",{className:J.a.todos,children:N.filter((function(e){return e.name.toLowerCase().includes(m.toLowerCase())})).sort((function(e,t){switch(x){case"completed":var a=te(e,t);return a.secondCompleted.length-a.firstCompleted.length;case"uncompleted":var n=te(e,t);return n.firstCompleted.length-n.secondCompleted.length;case"latest":return new Date(e.published_at)>new Date(t.published_at)?-1:1;case"amount":return t.task.length-e.task.length;default:return}})).map((function(e){var t=e.id,a=e.name,n=e.published_at,s=e.task;return Object(_.jsx)(I,{id:t,name:a,published_at:n,task:s,setOpenList:d,openList:l},t)}))}),Object(_.jsx)("div",{className:J.a.containerNewTodo,children:Object(_.jsx)("button",{onClick:function(){s.getId(null,!0),l||d(!0)},className:J.a.btn})})]})]})]})},ne=function(){var e=Object(o.a)(),t=Object(i.a)(e,1)[0].user;return Object(_.jsx)(_.Fragment,{children:Object(_.jsx)(l.a,{children:Object(_.jsxs)(d.d,{children:[Object(_.jsx)(d.b,{exact:!0,path:"/dashboard",children:t?Object(_.jsx)(ae,{}):Object(_.jsx)(d.a,{to:"/"})}),Object(_.jsx)(d.b,{exact:!0,path:"/registration",children:t?Object(_.jsx)(d.a,{to:"/dashboard"}):Object(_.jsx)(E,{})}),Object(_.jsx)(d.b,{exact:!0,path:"/",children:t?Object(_.jsx)(d.a,{to:"/dashboard"}):Object(_.jsx)(T,{})})]})})})};a(203);r.a.render(Object(_.jsx)(s.a.StrictMode,{children:Object(_.jsx)(ne,{})}),document.getElementById("root"))},24:function(e,t,a){e.exports={content:"Todo_content__3sOmB",todo:"Todo_todo__1rPHp",square:"Todo_square__QHhHb",completed:"Todo_completed__3mb2q",task:"Todo_task__wevb8",delete:"Todo_delete__1pbvj"}},36:function(e,t,a){e.exports={header:"Header_header__lKNbk",name:"Header_name__2LKKb",icon:"Header_icon__38Vt7",button:"Header_button__1Mz9f",blur:"Header_blur__tXJLu"}},37:function(e,t,a){e.exports={list:"SingleList_list__2DPUH",listDate:"SingleList_listDate__2AZl9",name:"SingleList_name__2vw-s",count:"SingleList_count__2kLLV"}},4:function(e,t,a){e.exports={create:"List_create__1EigG",containerAddInput:"List_containerAddInput__2GqPU",containerTodos:"List_containerTodos__1nnYJ",label:"List_label__1pdCd",field:"List_field__27rqC",fieldAddTask:"List_fieldAddTask__kRDQv",content:"List_content__11bgd",square:"List_square__k9Pyp",containerButtons:"List_containerButtons__1gTWj",btn:"List_btn__DDeh0",btnTodo:"List_btnTodo__eqbau",btnList:"List_btnList__12GnX",cancel:"List_cancel__3pKE0",add:"List_add__nMgHP",action:"List_action__F_wBK",close:"List_close__2QcJH",delete:"List_delete__3XCyy",task:"List_task__1Istp",todo:"List_todo__std-Z",completed:"List_completed__3RBkY","fa-check":"List_fa-check___Zjnp",message:"List_message__1h3UH"}},49:function(e,t,a){e.exports={container:"Field_container__19NGF",field:"Field_field__gEjah",error:"Field_error__1Gnx0",label:"Field_label__25TRj"}},87:function(e,t,a){e.exports={btn:"FormButton_btn__3wAi0"}}},[[204,1,2]]]);
//# sourceMappingURL=main.7b0f9362.chunk.js.map