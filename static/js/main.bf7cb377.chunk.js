(this["webpackJsonptodo-rekrutacja"]=this["webpackJsonptodo-rekrutacja"]||[]).push([[0],{13:function(e,t,a){e.exports={dashboard:"Dashboard_dashboard__1l120",main:"Dashboard_main__3SXLX",header:"Dashboard_header__2n_LS",containerNewTodo:"Dashboard_containerNewTodo__yC2o2",btn:"Dashboard_btn__1mwS5",label:"Dashboard_label__1NCam",labelSelect:"Dashboard_labelSelect__2W2OF",field:"Dashboard_field__3O5NP",select:"Dashboard_select__2bT_A",blur:"Dashboard_blur__2V9gS"}},202:function(e,t,a){},203:function(e,t,a){"use strict";a.r(t);var n=a(0),s=a.n(n),c=a(33),r=a.n(c),i=a(2),o=a(206),l=a(26),d=a(5),u=a(7),j=a(48),b=a.n(j),m=a(20),h=a(1),O=function(e){var t=Object.assign({},e),a=Object(m.c)(t),s=Object(i.a)(a,2),c=s[0],r=s[1],o=r.touched&&r.error?r.error:"",l=Object(n.useState)(!1),d=Object(i.a)(l,2),j=d[0],O=d[1];return Object(h.jsxs)("label",{onFocus:function(){return O(!j)},onBlur:function(){return O(!j)},className:b.a.label,children:[Object(h.jsx)("input",Object(u.a)(Object(u.a)(Object(u.a)({},t),c),{},{className:b.a.field})),Object(h.jsx)("p",{className:b.a.error,children:o})]})},p=a(86),f=a.n(p),_=function(e){var t=e.text;return Object(h.jsx)("button",{type:"submit",className:f.a.btn,children:t})},x=a(9),N=a.n(x),v=a(28),g=a.n(v),w=function(e){var t=e.openList,a=Object(o.a)(),n=Object(i.a)(a,3),s=n[0],c=n[2],r=s.user;return Object(h.jsxs)("header",{className:"".concat(g.a.header," ").concat(t?g.a.blur:null),children:[Object(h.jsx)("div",{children:Object(h.jsx)("h2",{className:g.a.name,children:"ToDo-List"})}),r&&Object(h.jsx)("div",{children:Object(h.jsx)("button",{onClick:function(){c("user")},className:g.a.button,children:Object(h.jsx)("i",{className:"fas fa-sign-out-alt ".concat(g.a.icon)})})})]})},k=function(){var e=Object(o.a)(),t=Object(i.a)(e,2)[1],a=Object(n.useState)(""),s=Object(i.a)(a,2),c=s[0],r=s[1],u=Object(d.g)();return Object(h.jsxs)(h.Fragment,{children:[Object(h.jsx)(w,{}),Object(h.jsxs)("div",{className:N.a.container,children:[Object(h.jsx)(m.b,{initialValues:{identifier:"",password:""},onSubmit:function(e){return function(e){fetch("".concat("https://recruitment.ultimate.systems","/auth/local"),{method:"POST",mode:"cors",headers:{"Content-Type":"application/json"},body:JSON.stringify(e)}).then((function(e){return e.json()})).then((function(e){400===e.statusCode&&r(e.message[0].messages[0].message),e.jwt&&(t("user",e),u.push("/dashboard"))}))}(e)},children:Object(h.jsxs)(m.a,{className:N.a.form,children:[Object(h.jsx)("h3",{className:N.a.formText,children:"Login"}),Object(h.jsx)(O,{name:"identifier",type:"text",id:"identifier",placeholder:"Email or Username"},"identifier-field"),Object(h.jsx)(O,{name:"password",type:"password",id:"password",placeholder:"Password"},"password-field"),Object(h.jsx)("p",{className:N.a.error,children:c}),Object(h.jsx)(_,{text:"Login"})]})}),Object(h.jsxs)("div",{className:N.a.action,children:[Object(h.jsx)("span",{className:N.a.text,children:"or"}),Object(h.jsx)(l.b,{className:N.a.link,to:"/registration",children:"create an account"})]})]})]})},L=a(24),y=L.a({username:L.c().min(1,"Must be at least 2 characters long").defined("Field is required"),email:L.c().email("Email is invalid").defined("Email is required"),password:L.c().min(8,"Password to short! Must be at least 8 characters long").defined("Field is required"),repeatPassword:L.c().oneOf([L.b("password"),null],"Passwords do not match").defined("Field is required")}),S=function(){var e=Object(n.useState)({type:"",message:""}),t=Object(i.a)(e,2),a=t[0],s=t[1];console.log("https://recruitment.ultimate.systems");var c=Object(d.g)();return Object(h.jsxs)(h.Fragment,{children:[Object(h.jsx)(w,{}),Object(h.jsxs)("div",{className:N.a.container,children:[Object(h.jsx)(l.b,{to:"/",children:Object(h.jsx)("i",{className:"fas fa-long-arrow-alt-left fa-3x ".concat(N.a.icon)})}),Object(h.jsx)(m.b,{initialValues:{username:"",email:"",password:"",repeatPassword:""},validationSchema:y,onSubmit:function(e){return function(e){var t={username:e.username,email:e.email,password:e.password};fetch("".concat("https://recruitment.ultimate.systems","/auth/local/register"),{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(t)}).then((function(e){return e.json()})).then((function(e){400===e.statusCode&&s({type:"invalid",message:e.message[0].messages[0].message}),e.jwt&&(s({type:"valid",message:"Your account has been created"}),setTimeout((function(){c.push("/")}),1500))}))}(e)},children:Object(h.jsxs)(m.a,{className:N.a.form,children:[Object(h.jsx)("h3",{className:N.a.formText,children:"Create an new account"}),Object(h.jsx)(O,{name:"username",type:"text",id:"username",placeholder:"Username"},"username-field"),Object(h.jsx)(O,{name:"email",type:"email",id:"email",placeholder:"Email"},"email-field"),Object(h.jsx)(O,{name:"password",type:"password",id:"password",placeholder:"Password"},"password-field"),Object(h.jsx)(O,{name:"repeatPassword",type:"password",id:"repeat-password",placeholder:"Repeat password"},"repeat-password-field"),Object(h.jsx)(_,{text:"Create"}),Object(h.jsx)("p",{className:"invalid"===a.type?"".concat(N.a.error):"".concat(N.a.success),children:a.message})]})})]})]})},C=a(14),D=a.n(C),T=a(23),A=a(205),E=a(207),q=Object(E.a)({initialState:{data:{id:null,isNew:!0}},actions:{getId:function(e,t){return function(a){a.getState;(0,a.setState)({data:{id:e,isNew:t}})}}}}),F=Object(A.a)(q),B=a(13),P=a.n(B),I=a(8),z=a(3),H=a.n(z),J=function(e){var t=e.name,a=e.isDone,n=e.id,s=e.list,c=e.setList,r=s.task;return Object(h.jsxs)("div",{className:"".concat(H.a.content," ").concat(H.a.todo),children:[Object(h.jsx)("button",{onClick:function(){!function(){var e=r.find((function(e){return e.id===n}));e.isDone=!e.isDone,c(Object(u.a)(Object(u.a)({},s),{},{task:Object(I.a)(r)}))}()},className:"".concat(H.a.square," ").concat(a?H.a.completed:null),children:a&&Object(h.jsx)("i",{className:"fas fa-check"})}),Object(h.jsx)("p",{className:H.a.task,children:t})]})},M=function(e){var t=e.setOpenList,a=e.refreshLists,s=F(),c=Object(i.a)(s,1)[0],r=Object(n.useState)({name:"",task:[]}),l=Object(i.a)(r,2),d=l[0],j=l[1],b=c.data,m=Object(n.useState)(""),O=Object(i.a)(m,2),p=O[0],f=O[1],_=Object(n.useState)({name:"",isDone:!1}),x=Object(i.a)(_,2),N=x[0],v=x[1],g=Object(o.a)(),w=Object(i.a)(g,1)[0].user,k=function(){var e=Object(T.a)(D.a.mark((function e(){var t,a;return D.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,fetch("".concat("https://recruitment.ultimate.systems","/to-do-lists/").concat(b.id),{method:"GET",headers:{"Content-Type":"application/json",Authorization:"Bearer ".concat(w.jwt)}});case 2:return t=e.sent,e.next=5,t.json();case 5:a=e.sent,j({name:a.name,task:a.task});case 7:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),L=function(e){return d.name.length>0||(f("Name of list cannot be empty"),!1)},y=function(){a(),t(!1)},S=function(){var e=Object(T.a)(D.a.mark((function e(){return D.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!L()){e.next=5;break}return e.next=4,fetch("".concat("https://recruitment.ultimate.systems","/to-do-lists"),{method:"POST",headers:{"Content-Type":"application/json",Authorization:"Bearer ".concat(w.jwt)},body:JSON.stringify(d)});case 4:y();case 5:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),C=function(){var e=Object(T.a)(D.a.mark((function e(){return D.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!L()){e.next=5;break}return e.next=4,fetch("".concat("https://recruitment.ultimate.systems","/to-do-lists/").concat(c.data.id),{method:"PUT",headers:{"Content-Type":"application/json",Authorization:"Bearer ".concat(w.jwt)},body:JSON.stringify(d)});case 4:y();case 5:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),A=function(){var e=Object(T.a)(D.a.mark((function e(){return D.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,fetch("".concat("https://recruitment.ultimate.systems","/to-do-lists/").concat(c.data.id),{method:"DELETE",headers:{"Content-Type":"application/json",Authorization:"Bearer ".concat(w.jwt)}});case 2:y();case 3:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();return Object(n.useEffect)((function(){null!==c.data.id&&k()}),[]),Object(h.jsxs)("div",{className:H.a.create,children:[Object(h.jsxs)("div",{children:[Object(h.jsx)("label",{className:H.a.label,children:Object(h.jsx)("input",{onChange:function(e){return j(Object(u.a)(Object(u.a)({},d),{},{name:e.target.value}))},placeholder:"List name",className:H.a.field,type:"text",value:d.name})}),Object(h.jsx)("div",{className:H.a.containerTodos,children:d.task.map((function(e,t){var a=e.name,n=e.isDone,s=e.id;return Object(h.jsx)(J,{list:d,setList:j,name:a,isDone:n,id:s},t)}))}),Object(h.jsx)("div",{className:H.a.containerAddInput,children:Object(h.jsxs)("label",{children:[Object(h.jsxs)("div",{className:H.a.content,children:[Object(h.jsx)("button",{onClick:function(){return v(Object(u.a)(Object(u.a)({},N),{},{isDone:!N.isDone}))},className:"".concat(H.a.square," ").concat(N.isDone?H.a.completed:null),children:N.isDone&&Object(h.jsx)("i",{className:"fas fa-check"})}),Object(h.jsx)("input",{placeholder:"Task name",className:H.a.fieldAddTask,type:"text",value:N.name,onChange:function(e){return v(Object(u.a)(Object(u.a)({},N),{},{name:e.target.value}))}})]}),Object(h.jsxs)("div",{className:H.a.containerButtons,children:[Object(h.jsx)("button",{onClick:function(){return v({name:"",isDone:!1})},className:"".concat(H.a.btn," ").concat(H.a.cancel),children:"Cancel"}),Object(h.jsx)("button",{onClick:function(){N.name.length>0&&(j(Object(u.a)(Object(u.a)({},d),{},{task:[].concat(Object(I.a)(d.task),[N])})),v({name:"",isDone:!1}))},className:"".concat(H.a.btn," ").concat(H.a.add),children:"Add"}),Object(h.jsx)("p",{className:H.a.message,children:p})]})]})})]}),Object(h.jsxs)("div",{className:H.a.action,children:[!b.isNew&&Object(h.jsx)("button",{className:"".concat(H.a.btn," ").concat(H.a.delete),onClick:A,children:"Delete"}),Object(h.jsx)("button",{onClick:function(){t(!1)},className:"".concat(H.a.btn," ").concat(H.a.close),children:"Cancel"}),Object(h.jsx)("button",{onClick:function(){b.isNew?S():C()},className:"".concat(H.a.btn," ").concat(H.a.add),children:"Save"})]})]})},U=a(36),V=a.n(U),R=function(e){var t=e.name,a=e.published_at,n=e.id,s=e.task,c=e.setOpenList,r=F(),o=Object(i.a)(r,2)[1];return Object(h.jsxs)("div",{onClick:function(){o.getId(n,!1),c(!0)},className:V.a.list,children:[Object(h.jsx)("h5",{className:V.a.name,children:t}),Object(h.jsxs)("p",{className:V.a.listDate,children:["Created at: ",function(){var e=new Date(a),t=e.getFullYear(),n=e.getMonth()+1,s=e.getDate();return n<10&&(n="0".concat(n)),s<10&&(s="0".concat(s)),"".concat(s,"-").concat(n,"-").concat(t)}()]}),Object(h.jsx)("p",{className:V.a.count,children:function(){var e=s.filter((function(e){return!0===e.isDone})),t=s.filter((function(e){return!1===e.isDone}));return"Completed: ".concat(e.length," Uncompleted: ").concat(t.length," All: ").concat(s.length)}()})]})},G=function(){var e=Object(o.a)(),t=Object(i.a)(e,1)[0].user,a=F(),s=Object(i.a)(a,2)[1],c=Object(n.useState)(!1),r=Object(i.a)(c,2),l=r[0],d=r[1],u=Object(n.useState)(""),j=Object(i.a)(u,2),b=j[0],m=j[1],O=Object(n.useState)("Sort by"),p=Object(i.a)(O,2),f=p[0],_=p[1],x=Object(n.useState)([]),N=Object(i.a)(x,2),v=N[0],g=N[1],k=function(){var e=Object(T.a)(D.a.mark((function e(){var a,n;return D.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,fetch("".concat("https://recruitment.ultimate.systems","/to-do-lists"),{method:"GET",headers:{"Content-Type":"application/json",Authorization:"Bearer ".concat(t.jwt)}});case 2:return a=e.sent,e.next=5,a.json();case 5:n=e.sent,g(n);case 7:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();return Object(n.useEffect)((function(){k()}),[]),Object(h.jsxs)(h.Fragment,{children:[Object(h.jsx)(w,{openList:l}),l&&Object(h.jsx)(M,{refreshLists:k,setOpenList:d}),Object(h.jsx)("section",{onClick:function(){l&&d(!1)},className:"".concat(P.a.dashboard," ").concat(l?P.a.blur:null),children:Object(h.jsxs)("div",{className:P.a.main,children:[Object(h.jsxs)("div",{className:P.a.header,children:[Object(h.jsx)("label",{className:P.a.label,children:Object(h.jsx)("input",{className:P.a.field,placeholder:"Search",type:"text",value:b,onChange:function(e){return m(e.target.value)}})}),Object(h.jsx)("label",{className:P.a.labelSelect,children:Object(h.jsxs)("select",{onChange:function(e){return _(e.target.value)},className:"".concat(P.a.field," ").concat(P.a.select),value:f,children:[Object(h.jsx)("option",{value:"Sort by",disabled:!0,children:"Sort by"}),Object(h.jsx)("option",{value:"completed",children:"Most completed tasks"}),Object(h.jsx)("option",{value:"uncompleted",children:"Least completed tasks"}),Object(h.jsx)("option",{value:"latest",children:"Latest"}),Object(h.jsx)("option",{value:"amount",children:"Most tasks"})]})})]}),Object(h.jsx)("div",{className:P.a.todos,children:v.filter((function(e){return e.name.toLowerCase().includes(b.toLowerCase())})).sort((function(e,t){var a=function(e,t){return{firstCompleted:e.task.filter((function(e){return!0===e.isDone})),secondCompleted:t.task.filter((function(e){return!0===e.isDone}))}}(e,t);switch(f){case"completed":return a.secondCompleted.length-a.firstCompleted.length;case"uncompleted":return a.firstCompleted.length-a.secondCompleted.length;case"latest":return new Date(e.published_at)>new Date(t.published_at)?-1:1;case"amount":return t.task.length-e.task.length}})).map((function(e){var t=e.id,a=e.name,n=e.published_at,s=e.task;return Object(h.jsx)(R,{id:t,name:a,published_at:n,task:s,setOpenList:d,openList:l},t)}))}),Object(h.jsx)("div",{className:P.a.containerNewTodo,children:Object(h.jsx)("button",{onClick:function(){s.getId(null,!0),l||d(!0)},className:P.a.btn})})]})})]})},K=function(){var e=Object(o.a)(),t=Object(i.a)(e,1)[0].user;return Object(h.jsx)(h.Fragment,{children:Object(h.jsx)(l.a,{children:Object(h.jsxs)(d.d,{children:[Object(h.jsx)(d.b,{exact:!0,path:"/dashboard",children:t?Object(h.jsx)(G,{}):Object(h.jsx)(d.a,{to:"/"})}),Object(h.jsx)(d.b,{exact:!0,path:"/registration",children:t?Object(h.jsx)(d.a,{to:"/dashboard"}):Object(h.jsx)(S,{})}),Object(h.jsx)(d.b,{exact:!0,path:"/",children:t?Object(h.jsx)(d.a,{to:"/dashboard"}):Object(h.jsx)(k,{})})]})})})};a(202);r.a.render(Object(h.jsx)(s.a.StrictMode,{children:Object(h.jsx)(K,{})}),document.getElementById("root"))},28:function(e,t,a){e.exports={header:"Header_header__lKNbk",name:"Header_name__2LKKb",icon:"Header_icon__38Vt7",button:"Header_button__1Mz9f",blur:"Header_blur__tXJLu"}},3:function(e,t,a){e.exports={create:"List_create__2-pVh",containerAddInput:"List_containerAddInput__1Y6VN",containerTodos:"List_containerTodos__IzZwJ",label:"List_label__RTqw5",field:"List_field__2v575",fieldAddTask:"List_fieldAddTask__20wqd",content:"List_content__21NjZ",square:"List_square__2CnO7",containerButtons:"List_containerButtons__2nWtq",btn:"List_btn__2H9SS",cancel:"List_cancel__1FGW-",add:"List_add__1BhEi",action:"List_action__10mlQ",close:"List_close__vmuVI",delete:"List_delete__3xIQA",task:"List_task__1JwwN",todo:"List_todo__b0dEm",completed:"List_completed__7t-48","fa-check":"List_fa-check__1xGqX",message:"List_message__3ilOH"}},36:function(e,t,a){e.exports={list:"SingleList_list__2NsRq",listDate:"SingleList_listDate__2EhzS",name:"SingleList_name__3RhUu",count:"SingleList_count__1ENwS"}},48:function(e,t,a){e.exports={label:"Field_label__25TRj",field:"Field_field__gEjah",error:"Field_error__1Gnx0"}},86:function(e,t,a){e.exports={btn:"FormButton_btn__3wAi0"}},9:function(e,t,a){e.exports={container:"Auth_container__DLp8M",formText:"Auth_formText__IrzHq",form:"Auth_form__1U8iO",icon:"Auth_icon__U5zUR",action:"Auth_action__r8qKH",link:"Auth_link__2vbjZ",text:"Auth_text__2mK62",error:"Auth_error__Rd2bV",success:"Auth_success__3ErGC"}}},[[203,1,2]]]);
//# sourceMappingURL=main.bf7cb377.chunk.js.map